2025-03-25 10:06:47.561 +01:00 [INF] âœ… Application started successfully.
2025-03-25 10:06:47.703 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 10:06:47.862 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 10:06:47.871 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 10:06:47.879 +01:00 [INF] Hosting environment: Development
2025-03-25 10:06:47.882 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 10:06:59.073 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 10:06:59.477 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 410.6169ms
2025-03-25 10:06:59.738 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 10:07:00.139 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 402.0188ms
2025-03-25 10:07:12.168 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 10:07:12.211 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 10:07:12.362 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 10:07:12.425 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 10:07:12.529 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 10:07:13.125 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 10:07:14.901 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 10:07:17.819 +01:00 [INF] Executed DbCommand (105ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 10:07:18.169 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 10:07:18.204 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 10:07:18.294 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 5747.0768ms
2025-03-25 10:07:18.302 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 10:07:18.324 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 6156.1989ms
2025-03-25 10:08:02.925 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 100
2025-03-25 10:08:03.220 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 10:08:03.234 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.QuizDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:08:03.300 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 10:08:03.308 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 10:08:03.328 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 88.2257ms
2025-03-25 10:08:03.336 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 10:08:03.342 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 414.9778ms
2025-03-25 10:08:12.802 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/quizzes/topic/1/quiz - null null
2025-03-25 10:08:12.837 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.TakeQuizByTopic (BrainThrust)'
2025-03-25 10:08:12.878 +01:00 [INF] Route matched with {action = "TakeQuizByTopic", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TakeQuizByTopic(Int32) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:08:12.934 +01:00 [INF] User 1 is taking quiz for topic ID 1
2025-03-25 10:08:13.032 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:08:13.163 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.QuizDto'.
2025-03-25 10:08:13.206 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.TakeQuizByTopic (BrainThrust) in 300.8645ms
2025-03-25 10:08:13.218 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.TakeQuizByTopic (BrainThrust)'
2025-03-25 10:08:13.223 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/quizzes/topic/1/quiz - 200 null application/json; charset=utf-8 420.9423ms
2025-03-25 10:08:25.372 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/quizzes/1/details - null null
2025-03-25 10:08:25.393 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.GetQuizByTopicId (BrainThrust)'
2025-03-25 10:08:25.405 +01:00 [INF] Route matched with {action = "GetQuizByTopicId", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetQuizByTopicId(Int32) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:08:25.422 +01:00 [INF] Fetching quiz for topic ID 1
2025-03-25 10:08:25.588 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:08:25.600 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.QuizDto'.
2025-03-25 10:08:25.614 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.GetQuizByTopicId (BrainThrust) in 202.0849ms
2025-03-25 10:08:25.620 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.GetQuizByTopicId (BrainThrust)'
2025-03-25 10:08:25.629 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/quizzes/1/details - 200 null application/json; charset=utf-8 257.2523ms
2025-03-25 10:08:37.858 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes - application/json 39
2025-03-25 10:08:37.865 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:08:37.915 +01:00 [INF] Route matched with {action = "CreateQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateQuiz(BrainThrust.src.Dtos.QuizDtos.CreateQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:08:37.934 +01:00 [INF] Creating a new quiz for topic ID 0
2025-03-25 10:08:37.943 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:08:38.278 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Quizzes] ([Created], [DateDeleted], [Modified], [Title], [TopicId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-03-25 10:08:38.359 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Quizzes_Topics_TopicId". The conflict occurred in database "BrainThrust-Database", table "dbo.Topics", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9e162829-5ae7-4421-9ef0-d4518df858fc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Quizzes_Topics_TopicId". The conflict occurred in database "BrainThrust-Database", table "dbo.Topics", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9e162829-5ae7-4421-9ef0-d4518df858fc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 10:08:38.432 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust) in 504.9824ms
2025-03-25 10:08:38.458 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:08:38.462 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Quizzes_Topics_TopicId". The conflict occurred in database "BrainThrust-Database", table "dbo.Topics", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9e162829-5ae7-4421-9ef0-d4518df858fc
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ApplicationDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\HP\Desktop\BrainThrust\src\Data\ApplicationDbContext.cs:line 85
   at BrainThrust.src.Repositories.QuizRepository.CreateQuiz(Quiz quiz) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 27
   at BrainThrust.src.Services.QuizService.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 46
   at BrainThrust.src.Controllers.QuizController.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 121
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 10:08:38.549 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes - 500 null text/plain; charset=utf-8 690.9587ms
2025-03-25 10:12:06.322 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes - application/json 39
2025-03-25 10:12:06.327 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:12:06.329 +01:00 [INF] Route matched with {action = "CreateQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateQuiz(BrainThrust.src.Dtos.QuizDtos.CreateQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:12:06.338 +01:00 [INF] Creating a new quiz for topic ID 1
2025-03-25 10:12:06.388 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:12:06.405 +01:00 [WRN] A quiz already exists for topic ID 1
2025-03-25 10:12:06.408 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust) in 73.541ms
2025-03-25 10:12:06.411 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:12:06.413 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A quiz already exists for this topic.
   at BrainThrust.src.Services.QuizService.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 37
   at BrainThrust.src.Controllers.QuizController.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 121
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 10:12:06.441 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes - 500 null text/plain; charset=utf-8 118.498ms
2025-03-25 10:34:07.042 +01:00 [INF] Application is shutting down...
2025-03-25 10:49:08.964 +01:00 [FTL] ðŸš¨ Application startup failed.
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: BrainThrust.src.Services.IQuizService Lifetime: Scoped ImplementationType: BrainThrust.src.Services.QuizService': Unable to resolve service for type 'BrainThrust.src.Repositories.ITopicRepository' while attempting to activate 'BrainThrust.src.Services.QuizService'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: BrainThrust.src.Services.IQuizService Lifetime: Scoped ImplementationType: BrainThrust.src.Services.QuizService': Unable to resolve service for type 'BrainThrust.src.Repositories.ITopicRepository' while attempting to activate 'BrainThrust.src.Services.QuizService'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'BrainThrust.src.Repositories.ITopicRepository' while attempting to activate 'BrainThrust.src.Services.QuizService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 101
2025-03-25 10:51:59.406 +01:00 [INF] âœ… Application started successfully.
2025-03-25 10:51:59.532 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 10:51:59.662 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 10:51:59.672 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 10:51:59.679 +01:00 [INF] Hosting environment: Development
2025-03-25 10:51:59.683 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 10:52:05.238 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 10:52:05.450 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 214.607ms
2025-03-25 10:52:05.799 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 10:52:06.049 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 249.9415ms
2025-03-25 10:52:14.111 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 10:52:14.125 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 10:52:14.199 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 10:52:14.204 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 10:52:14.248 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 10:52:14.497 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 10:52:15.620 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 10:52:17.709 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 10:52:17.913 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 10:52:17.922 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 10:52:17.960 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 3703.6395ms
2025-03-25 10:52:17.962 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 10:52:17.978 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 3866.7972ms
2025-03-25 10:52:36.446 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes - application/json 39
2025-03-25 10:52:36.548 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:52:36.558 +01:00 [INF] Route matched with {action = "CreateQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateQuiz(BrainThrust.src.Dtos.QuizDtos.CreateQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:52:36.654 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:52:36.664 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-25 10:52:36.668 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust) in 103.4906ms
2025-03-25 10:52:36.670 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:52:36.672 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes - 400 null text/plain; charset=utf-8 226.0541ms
2025-03-25 10:52:42.607 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes - application/json 39
2025-03-25 10:52:42.621 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:52:42.629 +01:00 [INF] Route matched with {action = "CreateQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateQuiz(BrainThrust.src.Dtos.QuizDtos.CreateQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:52:42.745 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:52:42.750 +01:00 [INF] Creating a new quiz for topic ID 1
2025-03-25 10:52:42.753 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:52:42.777 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:52:42.812 +01:00 [WRN] A quiz already exists for topic ID 1
2025-03-25 10:52:42.815 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust) in 182.8884ms
2025-03-25 10:52:42.817 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:52:42.820 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A quiz already exists for this topic.
   at BrainThrust.src.Services.QuizService.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 53
   at BrainThrust.src.Controllers.QuizController.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 122
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 10:52:42.859 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes - 500 null text/plain; charset=utf-8 251.7526ms
2025-03-25 10:53:12.222 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes - application/json 39
2025-03-25 10:53:12.227 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:53:12.233 +01:00 [INF] Route matched with {action = "CreateQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateQuiz(BrainThrust.src.Dtos.QuizDtos.CreateQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:53:12.256 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:53:12.260 +01:00 [INF] Creating a new quiz for topic ID 2
2025-03-25 10:53:12.262 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:53:12.273 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:53:12.287 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__quiz_TopicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__quiz_TopicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:53:12.424 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Quizzes] ([Created], [DateDeleted], [Modified], [Title], [TopicId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-03-25 10:53:12.476 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.QuizDto'.
2025-03-25 10:53:12.515 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust) in 278.2816ms
2025-03-25 10:53:12.519 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:53:12.521 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes - 201 null application/json; charset=utf-8 299.0679ms
2025-03-25 10:53:22.217 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/quizzes/1/details - null null
2025-03-25 10:53:22.222 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.GetQuizByTopicId (BrainThrust)'
2025-03-25 10:53:22.233 +01:00 [INF] Route matched with {action = "GetQuizByTopicId", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetQuizByTopicId(Int32) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:53:22.239 +01:00 [INF] Fetching quiz for topic ID 1
2025-03-25 10:53:22.243 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:53:22.252 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.QuizDto'.
2025-03-25 10:53:22.255 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.GetQuizByTopicId (BrainThrust) in 17.3383ms
2025-03-25 10:53:22.257 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.GetQuizByTopicId (BrainThrust)'
2025-03-25 10:53:22.259 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/quizzes/1/details - 200 null application/json; charset=utf-8 41.2282ms
2025-03-25 10:53:36.050 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/quizzes/topic/1/quiz - null null
2025-03-25 10:53:36.056 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.TakeQuizByTopic (BrainThrust)'
2025-03-25 10:53:36.088 +01:00 [INF] Route matched with {action = "TakeQuizByTopic", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TakeQuizByTopic(Int32) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:53:36.096 +01:00 [INF] User 1 is taking quiz for topic ID 1
2025-03-25 10:53:36.101 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:53:36.104 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.QuizDto'.
2025-03-25 10:53:36.107 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.TakeQuizByTopic (BrainThrust) in 14.1175ms
2025-03-25 10:53:36.111 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.TakeQuizByTopic (BrainThrust)'
2025-03-25 10:53:36.114 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/quizzes/topic/1/quiz - 200 null application/json; charset=utf-8 63.251ms
2025-03-25 10:53:53.832 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 100
2025-03-25 10:53:53.836 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 10:53:53.847 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.QuizDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:53:53.863 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 10:53:53.869 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 10:53:53.875 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 19.3623ms
2025-03-25 10:53:53.878 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 10:53:53.880 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 47.7888ms
2025-03-25 10:55:25.959 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes - application/json 39
2025-03-25 10:55:25.963 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:55:25.964 +01:00 [INF] Route matched with {action = "CreateQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateQuiz(BrainThrust.src.Dtos.QuizDtos.CreateQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 10:55:25.985 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:55:25.993 +01:00 [INF] Creating a new quiz for topic ID 2
2025-03-25 10:55:25.996 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 10:55:26.003 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
FROM [Quizzes] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[TopicId] = @__topicId_0
2025-03-25 10:55:26.008 +01:00 [WRN] A quiz already exists for topic ID 2
2025-03-25 10:55:26.010 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust) in 29.7463ms
2025-03-25 10:55:26.014 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.CreateQuiz (BrainThrust)'
2025-03-25 10:55:26.016 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: A quiz already exists for this topic.
   at BrainThrust.src.Services.QuizService.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 53
   at BrainThrust.src.Controllers.QuizController.CreateQuiz(CreateQuizDto dto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 34
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 122
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 10:55:26.029 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes - 500 null text/plain; charset=utf-8 70.403ms
2025-03-25 10:59:35.770 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/subjects - null null
2025-03-25 10:59:35.775 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust)'
2025-03-25 10:59:35.809 +01:00 [INF] Route matched with {action = "GetSubjects", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjects() on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 10:59:35.818 +01:00 [INF] Fetching all subjects.
2025-03-25 10:59:36.933 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title], [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title]
FROM [Subjects] AS [s]
LEFT JOIN (
    SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [s].[Id] = [t0].[SubjectId]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
ORDER BY [s].[Id]
2025-03-25 10:59:36.989 +01:00 [INF] Retrieved 3 subjects.
2025-03-25 10:59:36.991 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.SubjectDtos.GetSubjectDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 10:59:36.996 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust) in 1180.4397ms
2025-03-25 10:59:36.998 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust)'
2025-03-25 10:59:37.007 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/subjects - 200 null application/json; charset=utf-8 1237.0717ms
2025-03-25 10:59:44.505 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/subjects - application/json 50
2025-03-25 10:59:44.509 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.CreateSubject (BrainThrust)'
2025-03-25 10:59:44.521 +01:00 [INF] Route matched with {action = "CreateSubject", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateSubject(BrainThrust.src.Dtos.SubjectDtos.CreateSubjectDto) on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 10:59:44.530 +01:00 [INF] Received request to create a new subject.
2025-03-25 10:59:44.569 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Subjects] ([Created], [DateDeleted], [Description], [Modified], [ThumbnailUrl], [Title])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-25 10:59:44.578 +01:00 [INF] Subject 'string' created successfully with Id 4.
2025-03-25 10:59:44.580 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'BrainThrust.src.Dtos.SubjectDtos.GetSubjectDto'.
2025-03-25 10:59:44.588 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.CreateSubject (BrainThrust) in 60.5608ms
2025-03-25 10:59:44.590 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.CreateSubject (BrainThrust)'
2025-03-25 10:59:44.591 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/subjects - 201 null application/json; charset=utf-8 86.01ms
2025-03-25 11:00:00.332 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/subjects - null null
2025-03-25 11:00:00.335 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust)'
2025-03-25 11:00:00.337 +01:00 [INF] Route matched with {action = "GetSubjects", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjects() on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 11:00:00.384 +01:00 [INF] Fetching all subjects.
2025-03-25 11:00:00.407 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title], [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title]
FROM [Subjects] AS [s]
LEFT JOIN (
    SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [s].[Id] = [t0].[SubjectId]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
ORDER BY [s].[Id]
2025-03-25 11:00:00.418 +01:00 [INF] Retrieved 4 subjects.
2025-03-25 11:00:00.419 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.SubjectDtos.GetSubjectDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:00:00.422 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust) in 46.1558ms
2025-03-25 11:00:00.424 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust)'
2025-03-25 11:00:00.425 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/subjects - 200 null application/json; charset=utf-8 93.3898ms
2025-03-25 11:00:09.432 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/subjects/4 - null null
2025-03-25 11:00:09.436 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubject (BrainThrust)'
2025-03-25 11:00:09.444 +01:00 [INF] Route matched with {action = "GetSubject", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.SubjectDtos.GetSubjectDto]] GetSubject(Int32) on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 11:00:09.478 +01:00 [INF] Fetching subject with Id 4.
2025-03-25 11:00:09.503 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__subjectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[Id], [s0].[Created], [s0].[DateDeleted], [s0].[Description], [s0].[IsDeleted], [s0].[Modified], [s0].[ThumbnailUrl], [s0].[Title], [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title]
FROM (
    SELECT TOP(1) [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title]
    FROM [Subjects] AS [s]
    WHERE [s].[IsDeleted] = CAST(0 AS bit) AND [s].[Id] = @__subjectId_0
) AS [s0]
LEFT JOIN (
    SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [s0].[Id] = [t0].[SubjectId]
ORDER BY [s0].[Id]
2025-03-25 11:00:09.513 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.SubjectDtos.GetSubjectDto'.
2025-03-25 11:00:09.516 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.GetSubject (BrainThrust) in 43.4107ms
2025-03-25 11:00:09.517 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubject (BrainThrust)'
2025-03-25 11:00:09.518 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/subjects/4 - 200 null application/json; charset=utf-8 86.8607ms
2025-03-25 11:00:58.677 +01:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5073/api/subjects/4 - application/json 85
2025-03-25 11:00:58.680 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.UpdateSubject (BrainThrust)'
2025-03-25 11:00:58.712 +01:00 [INF] Route matched with {action = "UpdateSubject", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSubject(Int32, BrainThrust.src.Dtos.SubjectDtos.UpdateSubjectDto) on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 11:00:58.732 +01:00 [INF] Attempting to update subject with Id 4.
2025-03-25 11:00:58.747 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subjectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title]
FROM [Subjects] AS [s]
WHERE [s].[Id] = @__subjectId_0
2025-03-25 11:00:58.779 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Subjects] SET [Description] = @p0, [Modified] = @p1, [Title] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-03-25 11:00:58.787 +01:00 [INF] Subject with Id 4 updated successfully.
2025-03-25 11:00:58.797 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-25 11:00:58.799 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.UpdateSubject (BrainThrust) in 76.7966ms
2025-03-25 11:00:58.800 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.UpdateSubject (BrainThrust)'
2025-03-25 11:00:58.802 +01:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5073/api/subjects/4 - 204 null null 125.1388ms
2025-03-25 11:01:08.304 +01:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5073/api/subjects/4 - null null
2025-03-25 11:01:08.307 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.DeleteSubject (BrainThrust)'
2025-03-25 11:01:08.317 +01:00 [INF] Route matched with {action = "DeleteSubject", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteSubject(Int32) on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 11:01:08.327 +01:00 [INF] Attempting to permanently delete subject with Id 4.
2025-03-25 11:01:08.331 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subjectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s0].[Id], [s0].[Created], [s0].[DateDeleted], [s0].[Description], [s0].[IsDeleted], [s0].[Modified], [s0].[ThumbnailUrl], [s0].[Title], [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title]
FROM (
    SELECT TOP(1) [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title]
    FROM [Subjects] AS [s]
    WHERE [s].[IsDeleted] = CAST(0 AS bit) AND [s].[Id] = @__subjectId_0
) AS [s0]
LEFT JOIN (
    SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [s0].[Id] = [t0].[SubjectId]
ORDER BY [s0].[Id]
2025-03-25 11:01:08.366 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Subjects] SET [Created] = @p0, [DateDeleted] = @p1, [Description] = @p2, [IsDeleted] = @p3, [Modified] = @p4, [ThumbnailUrl] = @p5, [Title] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-03-25 11:01:08.376 +01:00 [INF] Subject 'software engineeering' with Id 4 permanently deleted.
2025-03-25 11:01:08.378 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-25 11:01:08.379 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.DeleteSubject (BrainThrust) in 53.1144ms
2025-03-25 11:01:08.381 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.DeleteSubject (BrainThrust)'
2025-03-25 11:01:08.382 +01:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5073/api/subjects/4 - 200 null text/plain; charset=utf-8 78.6329ms
2025-03-25 11:01:17.264 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/subjects - null null
2025-03-25 11:01:17.268 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust)'
2025-03-25 11:01:17.269 +01:00 [INF] Route matched with {action = "GetSubjects", controller = "Subject"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSubjects() on controller BrainThrust.src.Controllers.SubjectController (BrainThrust).
2025-03-25 11:01:17.300 +01:00 [INF] Fetching all subjects.
2025-03-25 11:01:17.312 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title], [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title]
FROM [Subjects] AS [s]
LEFT JOIN (
    SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [s].[Id] = [t0].[SubjectId]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
ORDER BY [s].[Id]
2025-03-25 11:01:17.321 +01:00 [INF] Retrieved 3 subjects.
2025-03-25 11:01:17.323 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.SubjectDtos.GetSubjectDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:01:17.326 +01:00 [INF] Executed action BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust) in 25.7709ms
2025-03-25 11:01:17.328 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.SubjectController.GetSubjects (BrainThrust)'
2025-03-25 11:01:17.330 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/subjects - 200 null application/json; charset=utf-8 65.9686ms
2025-03-25 11:01:25.869 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics - null null
2025-03-25 11:01:25.873 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:01:25.890 +01:00 [INF] Route matched with {action = "GetTopics", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopics() on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:01:25.909 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
FROM [Topics] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:01:25.920 +01:00 [INF] GetAllTopics: Retrieved 9 topics).
2025-03-25 11:01:25.922 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.TopicDtos.GetTopicDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:01:25.926 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust) in 32.6433ms
2025-03-25 11:01:25.928 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:01:25.929 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics - 200 null application/json; charset=utf-8 60.1405ms
2025-03-25 11:01:49.127 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/1 - null null
2025-03-25 11:01:49.131 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:01:49.142 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:01:49.194 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 14.3879ms
2025-03-25 11:01:49.196 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:01:49.197 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Topic>()
    .Where(t => t.IsDeleted == False)
    .Where(t => t
        .ToTopicDto().Id == __Id_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at BrainThrust.src.Controllers.TopicController.GetTopic(Int32 Id) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\TopicController.cs:line 39
   at lambda_method620(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 122
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 11:01:49.216 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/1 - 500 null text/plain; charset=utf-8 89.1204ms
2025-03-25 11:02:07.243 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/topics/4 - application/json 50
2025-03-25 11:02:07.247 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust)'
2025-03-25 11:02:07.260 +01:00 [INF] Route matched with {action = "CreateTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTopic(Int32, BrainThrust.src.Dtos.TopicDtos.CreateTopicDto) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:02:07.278 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__subjectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Subjects] AS [s]
        WHERE [s].[IsDeleted] = CAST(0 AS bit) AND [s].[Id] = @__subjectId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:02:07.283 +01:00 [WRN] CreateTopic: Subject with Id 4 does not exist.
2025-03-25 11:02:07.289 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-25 11:02:07.291 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust) in 27.0815ms
2025-03-25 11:02:07.293 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust)'
2025-03-25 11:02:07.295 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/topics/4 - 400 null text/plain; charset=utf-8 51.5245ms
2025-03-25 11:02:14.291 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/topics/3 - application/json 50
2025-03-25 11:02:14.294 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust)'
2025-03-25 11:02:14.296 +01:00 [INF] Route matched with {action = "CreateTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTopic(Int32, BrainThrust.src.Dtos.TopicDtos.CreateTopicDto) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:02:14.306 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subjectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Subjects] AS [s]
        WHERE [s].[IsDeleted] = CAST(0 AS bit) AND [s].[Id] = @__subjectId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:02:14.345 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Topics] ([Created], [DateDeleted], [Description], [Modified], [SubjectId], [Title])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-25 11:02:14.354 +01:00 [INF] CreateTopic: Topic 'string' created with Id 10.
2025-03-25 11:02:14.357 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'BrainThrust.src.Dtos.TopicDtos.GetTopicDto'.
2025-03-25 11:02:14.359 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust) in 56.3584ms
2025-03-25 11:02:14.360 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust)'
2025-03-25 11:02:14.361 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/topics/3 - 201 null application/json; charset=utf-8 70.8136ms
2025-03-25 11:02:33.837 +01:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5073/api/topics/10 - null null
2025-03-25 11:02:33.847 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.DeleteTopic (BrainThrust)'
2025-03-25 11:02:33.852 +01:00 [INF] Route matched with {action = "DeleteTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:02:33.924 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[SubjectId], [s].[Title], [s].[Id0], [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl], [s].[Created0], [s].[DateDeleted0], [s].[IsDeleted0], [s].[Modified0], [s].[Title0], [s].[TopicId]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title], [q0].[Id] AS [Id0], [q0].[Created] AS [Created0], [q0].[DateDeleted] AS [DateDeleted0], [q0].[IsDeleted] AS [IsDeleted0], [q0].[Modified] AS [Modified0], [q0].[Title] AS [Title0], [q0].[TopicId]
    FROM [Topics] AS [t]
    LEFT JOIN (
        SELECT [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit)
    ) AS [q0] ON [t].[Id] = [q0].[TopicId]
    WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__Id_0
) AS [s]
LEFT JOIN (
    SELECT [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
    FROM [Lessons] AS [l]
    WHERE [l].[IsDeleted] = CAST(0 AS bit)
) AS [l0] ON [s].[Id] = [l0].[TopicId]
ORDER BY [s].[Id], [s].[Id0]
2025-03-25 11:02:33.960 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p7='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Topics] SET [Created] = @p0, [DateDeleted] = @p1, [Description] = @p2, [IsDeleted] = @p3, [Modified] = @p4, [SubjectId] = @p5, [Title] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-03-25 11:02:33.980 +01:00 [INF] DeleteTopic: Topic 'string' with Id 10 deleted.
2025-03-25 11:02:33.982 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-25 11:02:33.985 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.DeleteTopic (BrainThrust) in 127.6572ms
2025-03-25 11:02:33.989 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.DeleteTopic (BrainThrust)'
2025-03-25 11:02:33.990 +01:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5073/api/topics/10 - 200 null text/plain; charset=utf-8 152.8329ms
2025-03-25 11:02:43.791 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics - null null
2025-03-25 11:02:43.794 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:02:43.796 +01:00 [INF] Route matched with {action = "GetTopics", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopics() on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:02:43.814 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
FROM [Topics] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:02:43.818 +01:00 [INF] GetAllTopics: Retrieved 9 topics).
2025-03-25 11:02:43.819 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.TopicDtos.GetTopicDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:02:43.825 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust) in 23.6112ms
2025-03-25 11:02:43.828 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:02:43.834 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics - 200 null application/json; charset=utf-8 42.3584ms
2025-03-25 11:03:05.086 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/topics/3 - application/json 50
2025-03-25 11:03:05.090 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust)'
2025-03-25 11:03:05.093 +01:00 [INF] Route matched with {action = "CreateTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTopic(Int32, BrainThrust.src.Dtos.TopicDtos.CreateTopicDto) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:03:05.146 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__subjectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Subjects] AS [s]
        WHERE [s].[IsDeleted] = CAST(0 AS bit) AND [s].[Id] = @__subjectId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:03:05.175 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Topics] ([Created], [DateDeleted], [Description], [Modified], [SubjectId], [Title])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-25 11:03:05.179 +01:00 [INF] CreateTopic: Topic 'string' created with Id 11.
2025-03-25 11:03:05.184 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'BrainThrust.src.Dtos.TopicDtos.GetTopicDto'.
2025-03-25 11:03:05.187 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust) in 43.2121ms
2025-03-25 11:03:05.188 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.CreateTopic (BrainThrust)'
2025-03-25 11:03:05.190 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/topics/3 - 201 null application/json; charset=utf-8 104.0248ms
2025-03-25 11:03:28.645 +01:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5073/api/topics/11 - application/json 26
2025-03-25 11:03:28.649 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.UpdateTopic (BrainThrust)'
2025-03-25 11:03:28.665 +01:00 [INF] Route matched with {action = "UpdateTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateTopic(Int32, BrainThrust.src.Dtos.TopicDtos.UpdateTopicDto) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:03:28.674 +01:00 [INF] Attempting to update topic with Id 11
2025-03-25 11:03:28.693 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
FROM [Topics] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__p_0
2025-03-25 11:03:28.719 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Topics] SET [Modified] = @p0, [Title] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-03-25 11:03:28.735 +01:00 [INF] Topic 11 updated successfully
2025-03-25 11:03:28.737 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-25 11:03:28.738 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.UpdateTopic (BrainThrust) in 68.4667ms
2025-03-25 11:03:28.744 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.UpdateTopic (BrainThrust)'
2025-03-25 11:03:28.746 +01:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5073/api/topics/11 - 204 null null 100.6583ms
2025-03-25 11:03:37.515 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics - null null
2025-03-25 11:03:37.519 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:03:37.520 +01:00 [INF] Route matched with {action = "GetTopics", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopics() on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:03:37.563 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
FROM [Topics] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:03:37.579 +01:00 [INF] GetAllTopics: Retrieved 10 topics).
2025-03-25 11:03:37.580 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.TopicDtos.GetTopicDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:03:37.582 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust) in 53.0425ms
2025-03-25 11:03:37.584 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:03:37.585 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics - 200 null application/json; charset=utf-8 69.9256ms
2025-03-25 11:03:45.994 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/1 - null null
2025-03-25 11:03:45.998 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:03:45.999 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:03:46.013 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 5.6633ms
2025-03-25 11:03:46.016 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:03:46.030 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Topic>()
    .Where(t => t.IsDeleted == False)
    .Where(t => t
        .ToTopicDto().Id == __Id_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at BrainThrust.src.Controllers.TopicController.GetTopic(Int32 Id) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\TopicController.cs:line 39
   at lambda_method620(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 122
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 11:03:46.053 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/1 - 500 null text/plain; charset=utf-8 58.4666ms
2025-03-25 11:14:53.966 +01:00 [INF] Application is shutting down...
2025-03-25 11:15:35.702 +01:00 [INF] âœ… Application started successfully.
2025-03-25 11:15:35.777 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 11:15:35.855 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 11:15:35.859 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 11:15:35.862 +01:00 [INF] Hosting environment: Development
2025-03-25 11:15:35.863 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 11:15:46.228 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 11:15:46.358 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 131.9688ms
2025-03-25 11:15:46.613 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 11:15:46.747 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.4883ms
2025-03-25 11:15:59.123 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 11:15:59.147 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 11:15:59.234 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 11:15:59.238 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 11:15:59.265 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 11:15:59.472 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 11:16:00.218 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 11:16:01.938 +01:00 [INF] Executed DbCommand (37ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 11:16:02.060 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 11:16:02.066 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:16:02.093 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2823.7055ms
2025-03-25 11:16:02.096 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 11:16:02.109 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2986.1806ms
2025-03-25 11:16:16.960 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/users/me - null null
2025-03-25 11:16:17.011 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.GetUser (BrainThrust)'
2025-03-25 11:16:17.017 +01:00 [INF] Route matched with {action = "GetUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUser() on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 11:16:17.056 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Email] = @__userEmail_0
2025-03-25 11:16:17.060 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.UserDtos.GetUserDto'.
2025-03-25 11:16:17.064 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.GetUser (BrainThrust) in 44.2266ms
2025-03-25 11:16:17.066 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.GetUser (BrainThrust)'
2025-03-25 11:16:17.069 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/users/me - 200 null application/json; charset=utf-8 109.8985ms
2025-03-25 11:16:33.324 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics - null null
2025-03-25 11:16:33.330 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:16:33.339 +01:00 [INF] Route matched with {action = "GetTopics", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTopics() on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:16:33.422 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
FROM [Topics] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:16:33.449 +01:00 [INF] GetAllTopics: Retrieved 10 topics).
2025-03-25 11:16:33.451 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.TopicDtos.GetTopicDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:16:33.463 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust) in 115.025ms
2025-03-25 11:16:33.465 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopics (BrainThrust)'
2025-03-25 11:16:33.468 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics - 200 null application/json; charset=utf-8 143.5563ms
2025-03-25 11:16:41.836 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/1 - null null
2025-03-25 11:16:41.840 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:41.849 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:16:41.982 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title], [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__Id_0
) AS [t0]
LEFT JOIN (
    SELECT [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
    FROM [Lessons] AS [l]
    WHERE [l].[IsDeleted] = CAST(0 AS bit)
) AS [l0] ON [t0].[Id] = [l0].[TopicId]
ORDER BY [t0].[Id]
2025-03-25 11:16:42.001 +01:00 [INF] GetTopic: Retrieved topic 'Numbers and Operations' with Id 1.
2025-03-25 11:16:42.011 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.TopicDtos.GetTopicDto'.
2025-03-25 11:16:42.014 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 133.6461ms
2025-03-25 11:16:42.017 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:42.018 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/1 - 200 null application/json; charset=utf-8 182.0071ms
2025-03-25 11:16:49.628 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/8 - null null
2025-03-25 11:16:49.632 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:49.634 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:16:49.646 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title], [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__Id_0
) AS [t0]
LEFT JOIN (
    SELECT [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
    FROM [Lessons] AS [l]
    WHERE [l].[IsDeleted] = CAST(0 AS bit)
) AS [l0] ON [t0].[Id] = [l0].[TopicId]
ORDER BY [t0].[Id]
2025-03-25 11:16:49.656 +01:00 [INF] GetTopic: Retrieved topic 'Geography' with Id 8.
2025-03-25 11:16:49.660 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.TopicDtos.GetTopicDto'.
2025-03-25 11:16:49.662 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 22.6011ms
2025-03-25 11:16:49.664 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:49.665 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/8 - 200 null application/json; charset=utf-8 37.0191ms
2025-03-25 11:16:55.727 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/10 - null null
2025-03-25 11:16:55.731 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:55.733 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:16:55.742 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title], [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__Id_0
) AS [t0]
LEFT JOIN (
    SELECT [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
    FROM [Lessons] AS [l]
    WHERE [l].[IsDeleted] = CAST(0 AS bit)
) AS [l0] ON [t0].[Id] = [l0].[TopicId]
ORDER BY [t0].[Id]
2025-03-25 11:16:55.748 +01:00 [WRN] GetTopic: Topic with Id 10 not found.
2025-03-25 11:16:55.758 +01:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-03-25 11:16:55.760 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 21.2166ms
2025-03-25 11:16:55.763 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:55.764 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/10 - 404 null text/plain; charset=utf-8 36.7984ms
2025-03-25 11:16:59.585 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/11 - null null
2025-03-25 11:16:59.588 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:59.590 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:16:59.627 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title], [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__Id_0
) AS [t0]
LEFT JOIN (
    SELECT [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
    FROM [Lessons] AS [l]
    WHERE [l].[IsDeleted] = CAST(0 AS bit)
) AS [l0] ON [t0].[Id] = [l0].[TopicId]
ORDER BY [t0].[Id]
2025-03-25 11:16:59.634 +01:00 [INF] GetTopic: Retrieved topic 'new topic' with Id 11.
2025-03-25 11:16:59.637 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.TopicDtos.GetTopicDto'.
2025-03-25 11:16:59.639 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 45.2748ms
2025-03-25 11:16:59.641 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:16:59.642 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/11 - 200 null application/json; charset=utf-8 56.9398ms
2025-03-25 11:17:04.658 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/topics/9 - null null
2025-03-25 11:17:04.663 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:17:04.664 +01:00 [INF] Route matched with {action = "GetTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.TopicDtos.GetTopicDto]] GetTopic(Int32) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:17:04.687 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title], [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
FROM (
    SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__Id_0
) AS [t0]
LEFT JOIN (
    SELECT [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
    FROM [Lessons] AS [l]
    WHERE [l].[IsDeleted] = CAST(0 AS bit)
) AS [l0] ON [t0].[Id] = [l0].[TopicId]
ORDER BY [t0].[Id]
2025-03-25 11:17:04.691 +01:00 [INF] GetTopic: Retrieved topic 'Science and Technology' with Id 9.
2025-03-25 11:17:04.693 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.TopicDtos.GetTopicDto'.
2025-03-25 11:17:04.694 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust) in 22.7971ms
2025-03-25 11:17:04.699 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.GetTopic (BrainThrust)'
2025-03-25 11:17:04.703 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/topics/9 - 200 null application/json; charset=utf-8 45.3403ms
2025-03-25 11:17:32.696 +01:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5073/api/topics/10 - application/json 46
2025-03-25 11:17:32.703 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.TopicController.UpdateTopic (BrainThrust)'
2025-03-25 11:17:32.712 +01:00 [INF] Route matched with {action = "UpdateTopic", controller = "Topic"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateTopic(Int32, BrainThrust.src.Dtos.TopicDtos.UpdateTopicDto) on controller BrainThrust.src.Controllers.TopicController (BrainThrust).
2025-03-25 11:17:32.720 +01:00 [INF] Attempting to update topic with Id 10
2025-03-25 11:17:32.745 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
FROM [Topics] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__p_0
2025-03-25 11:17:32.749 +01:00 [WRN] Topic with Id 10 not found
2025-03-25 11:17:32.750 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 11:17:32.753 +01:00 [INF] Executed action BrainThrust.src.Controllers.TopicController.UpdateTopic (BrainThrust) in 35.8605ms
2025-03-25 11:17:32.759 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.TopicController.UpdateTopic (BrainThrust)'
2025-03-25 11:17:32.761 +01:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5073/api/topics/10 - 404 null application/json; charset=utf-8 65.1756ms
2025-03-25 11:18:17.171 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/lessons/1 - null null
2025-03-25 11:18:17.180 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:18:17.226 +01:00 [INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.LessonDtos.GetLessonDto]] GetLesson(Int32) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:18:17.232 +01:00 [INF] Fetching lesson with Id 1
2025-03-25 11:18:17.251 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust) in 22.3803ms
2025-03-25 11:18:17.254 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:18:17.259 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Lesson>()
    .Where(l => l.IsDeleted == False)
    .Where(l => l
        .ToLessonDto().Id == __Id_0)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at BrainThrust.src.Controllers.LessonController.GetLesson(Int32 Id) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\LessonController.cs:line 33
   at lambda_method314(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 122
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 11:18:17.294 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/lessons/1 - 500 null text/plain; charset=utf-8 123.8914ms
2025-03-25 11:18:32.302 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/progress/subject/1 - null null
2025-03-25 11:18:32.308 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LearningProgressController.GetUserProgress (BrainThrust)'
2025-03-25 11:18:32.314 +01:00 [INF] Route matched with {action = "GetUserProgress", controller = "LearningProgress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserProgress(Int32) on controller BrainThrust.src.Controllers.LearningProgressController (BrainThrust).
2025-03-25 11:18:32.359 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__subjectId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [l].[Id], [l].[Created], [l].[DateCompleted], [l].[DateDeleted], [l].[IsCompleted], [l].[IsDeleted], [l].[LessonId], [l].[Modified], [l].[UserId], [l1].[Id], [l1].[Content], [l1].[Created], [l1].[DateDeleted], [l1].[IsDeleted], [l1].[Modified], [l1].[Title], [l1].[TopicId], [l1].[VideoUrl], [t0].[Id], [t0].[Created], [t0].[DateDeleted], [t0].[Description], [t0].[IsDeleted], [t0].[Modified], [t0].[SubjectId], [t0].[Title]
FROM [LessonProgresses] AS [l]
INNER JOIN (
    SELECT [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
    FROM [Lessons] AS [l0]
    WHERE [l0].[IsDeleted] = CAST(0 AS bit)
) AS [l1] ON [l].[LessonId] = [l1].[Id]
INNER JOIN (
    SELECT [t].[Id], [t].[Created], [t].[DateDeleted], [t].[Description], [t].[IsDeleted], [t].[Modified], [t].[SubjectId], [t].[Title]
    FROM [Topics] AS [t]
    WHERE [t].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [l1].[TopicId] = [t0].[Id]
WHERE [l].[IsDeleted] = CAST(0 AS bit) AND [l].[UserId] = @__userId_0 AND [t0].[SubjectId] = @__subjectId_1
2025-03-25 11:18:32.410 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.LearningProgressDtos.LearningProgressDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:18:32.420 +01:00 [INF] Executed action BrainThrust.src.Controllers.LearningProgressController.GetUserProgress (BrainThrust) in 99.5565ms
2025-03-25 11:18:32.423 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LearningProgressController.GetUserProgress (BrainThrust)'
2025-03-25 11:18:32.424 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/progress/subject/1 - 200 null application/json; charset=utf-8 121.8139ms
2025-03-25 11:18:40.873 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/progress/user/last-lesson - null null
2025-03-25 11:18:40.878 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LearningProgressController.GetLastLesson (BrainThrust)'
2025-03-25 11:18:40.892 +01:00 [INF] Route matched with {action = "GetLastLesson", controller = "LearningProgress"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLastLesson() on controller BrainThrust.src.Controllers.LearningProgressController (BrainThrust).
2025-03-25 11:18:40.941 +01:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Created], [l].[DateCompleted], [l].[DateDeleted], [l].[IsCompleted], [l].[IsDeleted], [l].[LessonId], [l].[Modified], [l].[UserId], [l1].[Id], [l1].[Content], [l1].[Created], [l1].[DateDeleted], [l1].[IsDeleted], [l1].[Modified], [l1].[Title], [l1].[TopicId], [l1].[VideoUrl]
FROM [LessonProgresses] AS [l]
INNER JOIN (
    SELECT [l0].[Id], [l0].[Content], [l0].[Created], [l0].[DateDeleted], [l0].[IsDeleted], [l0].[Modified], [l0].[Title], [l0].[TopicId], [l0].[VideoUrl]
    FROM [Lessons] AS [l0]
    WHERE [l0].[IsDeleted] = CAST(0 AS bit)
) AS [l1] ON [l].[LessonId] = [l1].[Id]
WHERE [l].[IsDeleted] = CAST(0 AS bit) AND [l].[UserId] = @__userId_0
ORDER BY [l].[DateCompleted] DESC
2025-03-25 11:18:40.947 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[BrainThrust.src.Dtos.LearningProgressDtos.LearningProgressDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:18:40.951 +01:00 [INF] Executed action BrainThrust.src.Controllers.LearningProgressController.GetLastLesson (BrainThrust) in 56.0496ms
2025-03-25 11:18:40.957 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LearningProgressController.GetLastLesson (BrainThrust)'
2025-03-25 11:18:40.959 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/progress/user/last-lesson - 200 null application/json; charset=utf-8 85.8586ms
2025-03-25 11:21:16.156 +01:00 [INF] Application is shutting down...
2025-03-25 11:21:31.581 +01:00 [INF] âœ… Application started successfully.
2025-03-25 11:21:31.687 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 11:21:31.777 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 11:21:31.782 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 11:21:31.784 +01:00 [INF] Hosting environment: Development
2025-03-25 11:21:31.785 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 11:21:31.922 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 11:21:32.061 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 140.4643ms
2025-03-25 11:21:32.202 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 11:21:32.343 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.0489ms
2025-03-25 11:21:40.392 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 11:21:40.413 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 11:21:40.464 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 11:21:40.467 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 11:21:40.495 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 11:21:40.649 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 11:21:41.366 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 11:21:43.027 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 11:21:43.165 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 11:21:43.171 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:21:43.200 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2700.1685ms
2025-03-25 11:21:43.205 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 11:21:43.227 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2834.7565ms
2025-03-25 11:22:05.452 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/lessons/1 - null null
2025-03-25 11:22:05.590 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:22:05.608 +01:00 [INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.LessonDtos.GetLessonDto]] GetLesson(Int32) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:22:05.651 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
FROM [Lessons] AS [l]
WHERE [l].[IsDeleted] = CAST(0 AS bit) AND [l].[Id] = @__Id_0 AND [l].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:22:05.654 +01:00 [INF] GetLesson: Retrieved lesson 'Addition and Subtraction' with Id 1.
2025-03-25 11:22:05.657 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.LessonDtos.GetLessonDto'.
2025-03-25 11:22:05.662 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust) in 49.5455ms
2025-03-25 11:22:05.666 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:22:05.668 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/lessons/1 - 200 null application/json; charset=utf-8 215.9584ms
2025-03-25 11:23:02.741 +01:00 [INF] Request starting HTTP/1.1 PATCH http://localhost:5073/api/lessons/1 - application/json 42
2025-03-25 11:23:02.775 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.UpdateLesson (BrainThrust)'
2025-03-25 11:23:02.782 +01:00 [INF] Route matched with {action = "UpdateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.UpdateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:23:02.790 +01:00 [INF] Attempting to update lesson with Id 1
2025-03-25 11:23:02.882 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
FROM [Lessons] AS [l]
WHERE [l].[IsDeleted] = CAST(0 AS bit) AND [l].[Id] = @__p_0
2025-03-25 11:23:03.000 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Lessons] SET [Modified] = @p0, [Title] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-03-25 11:23:03.015 +01:00 [INF] Lesson 1 updated successfully
2025-03-25 11:23:03.022 +01:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-25 11:23:03.024 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.UpdateLesson (BrainThrust) in 239.4095ms
2025-03-25 11:23:03.029 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.UpdateLesson (BrainThrust)'
2025-03-25 11:23:03.031 +01:00 [INF] Request finished HTTP/1.1 PATCH http://localhost:5073/api/lessons/1 - 204 null null 290.3258ms
2025-03-25 11:23:07.583 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/lessons/1 - null null
2025-03-25 11:23:07.588 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:23:07.590 +01:00 [INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.LessonDtos.GetLessonDto]] GetLesson(Int32) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:23:07.605 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
FROM [Lessons] AS [l]
WHERE [l].[IsDeleted] = CAST(0 AS bit) AND [l].[Id] = @__Id_0 AND [l].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:23:07.616 +01:00 [INF] GetLesson: Retrieved lesson 'Addition and Subtractions' with Id 1.
2025-03-25 11:23:07.618 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.LessonDtos.GetLessonDto'.
2025-03-25 11:23:07.619 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust) in 22.6717ms
2025-03-25 11:23:07.621 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:23:07.622 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/lessons/1 - 200 null application/json; charset=utf-8 39.0318ms
2025-03-25 11:23:23.114 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/4/lessons - application/json 74
2025-03-25 11:23:23.117 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:23:23.131 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:23:23.144 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-25 11:23:23.174 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 37.3601ms
2025-03-25 11:23:23.177 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:23:23.178 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/4/lessons - 400 null application/problem+json; charset=utf-8 64.5857ms
2025-03-25 11:23:47.809 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/1/lessons - application/json 74
2025-03-25 11:23:47.813 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:23:47.814 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:23:47.857 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-25 11:23:47.863 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 7.9482ms
2025-03-25 11:23:47.865 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:23:47.867 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/1/lessons - 400 null application/problem+json; charset=utf-8 57.6634ms
2025-03-25 11:24:20.467 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/5/lessons - application/json 74
2025-03-25 11:24:20.471 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:24:20.472 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:24:20.482 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-25 11:24:20.489 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 8.9699ms
2025-03-25 11:24:20.494 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:24:20.496 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/5/lessons - 400 null application/problem+json; charset=utf-8 29.3806ms
2025-03-25 11:24:29.917 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/50/lessons - application/json 74
2025-03-25 11:24:29.920 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:24:29.921 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:24:29.926 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-25 11:24:29.960 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 35.4639ms
2025-03-25 11:24:29.963 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:24:29.966 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/50/lessons - 400 null application/problem+json; charset=utf-8 48.9499ms
2025-03-25 11:24:45.378 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/1/lessons - application/json 74
2025-03-25 11:24:45.381 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:24:45.383 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:24:45.398 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-25 11:24:45.401 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 3.7007ms
2025-03-25 11:24:45.405 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:24:45.410 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/1/lessons - 400 null application/problem+json; charset=utf-8 32.4704ms
2025-03-25 11:25:17.959 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/50/lessons - application/json 95
2025-03-25 11:25:17.963 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:25:17.965 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:25:18.007 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:25:18.012 +01:00 [WRN] CreateLesson: Topic with Id 50 not found.
2025-03-25 11:25:18.016 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 11:25:18.019 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 48.6429ms
2025-03-25 11:25:18.021 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:25:18.024 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/50/lessons - 404 null application/json; charset=utf-8 64.4033ms
2025-03-25 11:25:29.168 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/10/lessons - application/json 95
2025-03-25 11:25:29.176 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:25:29.181 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:25:29.188 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:25:29.199 +01:00 [WRN] CreateLesson: Topic with Id 10 not found.
2025-03-25 11:25:29.201 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 11:25:29.203 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 18.4887ms
2025-03-25 11:25:29.205 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:25:29.207 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/10/lessons - 404 null application/json; charset=utf-8 38.4859ms
2025-03-25 11:25:33.986 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/9/lessons - application/json 95
2025-03-25 11:25:33.990 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:25:33.992 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:25:34.002 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:25:34.065 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Lessons] ([Content], [Created], [DateDeleted], [Modified], [Title], [TopicId], [VideoUrl])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-03-25 11:25:34.088 +01:00 [INF] CreateLesson: Lesson 'string' created with Id 13.
2025-03-25 11:25:34.094 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'BrainThrust.src.Dtos.LessonDtos.GetLessonDto'.
2025-03-25 11:25:34.114 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 115.5804ms
2025-03-25 11:25:34.118 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:25:34.120 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/9/lessons - 201 null application/json; charset=utf-8 133.9417ms
2025-03-25 11:32:44.965 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/lessons/111 - null null
2025-03-25 11:32:44.970 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:32:44.971 +01:00 [INF] Route matched with {action = "GetLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BrainThrust.src.Dtos.LessonDtos.GetLessonDto]] GetLesson(Int32) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:32:45.998 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Content], [l].[Created], [l].[DateDeleted], [l].[IsDeleted], [l].[Modified], [l].[Title], [l].[TopicId], [l].[VideoUrl]
FROM [Lessons] AS [l]
WHERE [l].[IsDeleted] = CAST(0 AS bit) AND [l].[Id] = @__Id_0 AND [l].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:32:46.002 +01:00 [WRN] GetLesson: Lesson with Id 111 not found.
2025-03-25 11:32:46.005 +01:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-03-25 11:32:46.009 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust) in 1034.6491ms
2025-03-25 11:32:46.165 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.GetLesson (BrainThrust)'
2025-03-25 11:32:46.167 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/lessons/111 - 404 null text/plain; charset=utf-8 1201.4658ms
2025-03-25 11:33:00.453 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/111/lessons - application/json 95
2025-03-25 11:33:00.456 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:33:00.458 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:33:00.499 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Topics] AS [t]
        WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__topicId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 11:33:00.505 +01:00 [WRN] CreateLesson: Topic with Id 111 not found.
2025-03-25 11:33:00.509 +01:00 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 11:33:00.511 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 24.5181ms
2025-03-25 11:33:00.513 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:33:00.515 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/111/lessons - 404 null application/json; charset=utf-8 62.2339ms
2025-03-25 11:33:19.745 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/lessons/topics/1/lessons - application/json 74
2025-03-25 11:33:19.749 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:33:19.751 +01:00 [INF] Route matched with {action = "CreateLesson", controller = "Lesson"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLesson(Int32, BrainThrust.src.Dtos.LessonDtos.CreateLessonDto) on controller BrainThrust.src.Controllers.LessonController (BrainThrust).
2025-03-25 11:33:19.759 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-25 11:33:19.764 +01:00 [INF] Executed action BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust) in 6.1762ms
2025-03-25 11:33:19.774 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.LessonController.CreateLesson (BrainThrust)'
2025-03-25 11:33:19.776 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/lessons/topics/1/lessons - 400 null application/problem+json; charset=utf-8 30.2655ms
2025-03-25 11:34:48.365 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/enrollments - null null
2025-03-25 11:34:48.374 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.EnrollmentController.GetEnrollments (BrainThrust)'
2025-03-25 11:34:48.379 +01:00 [INF] Route matched with {action = "GetEnrollments", controller = "Enrollment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BrainThrust.src.Dtos.EnrollmentDtos.GetEnrollmentDto]]] GetEnrollments() on controller BrainThrust.src.Controllers.EnrollmentController (BrainThrust).
2025-03-25 11:34:48.390 +01:00 [INF] Admin fetching all active enrollments.
2025-03-25 11:34:48.473 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Created], [e].[DateDeleted], [e].[IsDeleted], [e].[Modified], [e].[SubjectId], [e].[UserId], [u0].[Id], [u0].[Address], [u0].[Created], [u0].[DateDeleted], [u0].[Email], [u0].[FirstName], [u0].[IsDeleted], [u0].[LastName], [u0].[Modified], [u0].[PasswordHash], [u0].[PasswordResetToken], [u0].[PasswordSalt], [u0].[PhoneNumber], [u0].[Role], [u0].[TokenExpiry], [s0].[Id], [s0].[Created], [s0].[DateDeleted], [s0].[Description], [s0].[IsDeleted], [s0].[Modified], [s0].[ThumbnailUrl], [s0].[Title]
FROM [Enrollments] AS [e]
INNER JOIN (
    SELECT [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
    FROM [Users] AS [u]
    WHERE [u].[IsDeleted] = CAST(0 AS bit)
) AS [u0] ON [e].[UserId] = [u0].[Id]
INNER JOIN (
    SELECT [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title]
    FROM [Subjects] AS [s]
    WHERE [s].[IsDeleted] = CAST(0 AS bit)
) AS [s0] ON [e].[SubjectId] = [s0].[Id]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:34:48.520 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.EnrollmentDtos.GetEnrollmentDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:34:48.525 +01:00 [INF] Executed action BrainThrust.src.Controllers.EnrollmentController.GetEnrollments (BrainThrust) in 139.2638ms
2025-03-25 11:34:48.527 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.EnrollmentController.GetEnrollments (BrainThrust)'
2025-03-25 11:34:48.529 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/enrollments - 200 null application/json; charset=utf-8 163.8817ms
2025-03-25 11:35:00.129 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/enrollments/user - null null
2025-03-25 11:35:00.135 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.EnrollmentController.GetUserEnrollments (BrainThrust)'
2025-03-25 11:35:00.143 +01:00 [INF] Route matched with {action = "GetUserEnrollments", controller = "Enrollment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[BrainThrust.src.Dtos.EnrollmentDtos.GetEnrollmentDto]]] GetUserEnrollments() on controller BrainThrust.src.Controllers.EnrollmentController (BrainThrust).
2025-03-25 11:35:00.161 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Email] = @__email_0
2025-03-25 11:35:00.170 +01:00 [INF] Fetching enrollments for user Id 1
2025-03-25 11:35:00.190 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Created], [e].[DateDeleted], [e].[IsDeleted], [e].[Modified], [e].[SubjectId], [e].[UserId], [s0].[Id], [s0].[Created], [s0].[DateDeleted], [s0].[Description], [s0].[IsDeleted], [s0].[Modified], [s0].[ThumbnailUrl], [s0].[Title]
FROM [Enrollments] AS [e]
INNER JOIN (
    SELECT [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title]
    FROM [Subjects] AS [s]
    WHERE [s].[IsDeleted] = CAST(0 AS bit)
) AS [s0] ON [e].[SubjectId] = [s0].[Id]
WHERE [e].[IsDeleted] = CAST(0 AS bit) AND [e].[UserId] = @__user_Id_0 AND [e].[IsDeleted] = CAST(0 AS bit)
2025-03-25 11:35:00.195 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BrainThrust.src.Dtos.EnrollmentDtos.GetEnrollmentDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 11:35:00.197 +01:00 [INF] Executed action BrainThrust.src.Controllers.EnrollmentController.GetUserEnrollments (BrainThrust) in 50.5901ms
2025-03-25 11:35:00.199 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.EnrollmentController.GetUserEnrollments (BrainThrust)'
2025-03-25 11:35:00.203 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/enrollments/user - 200 null application/json; charset=utf-8 73.9701ms
2025-03-25 11:35:10.245 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/enrollments/enroll - application/json 20
2025-03-25 11:35:10.250 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.EnrollmentController.EnrollUser (BrainThrust)'
2025-03-25 11:35:10.289 +01:00 [INF] Route matched with {action = "EnrollUser", controller = "Enrollment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] EnrollUser(BrainThrust.src.Dtos.EnrollmentDtos.CreateEnrollmentDto) on controller BrainThrust.src.Controllers.EnrollmentController (BrainThrust).
2025-03-25 11:35:10.301 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Email] = @__email_0
2025-03-25 11:35:10.307 +01:00 [INF] User 1 attempting to enroll in Subject 2
2025-03-25 11:35:10.322 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Created], [s].[DateDeleted], [s].[Description], [s].[IsDeleted], [s].[Modified], [s].[ThumbnailUrl], [s].[Title]
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit) AND [s].[Id] = @__p_0
2025-03-25 11:35:10.340 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32), @__request_SubjectId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Created], [e].[DateDeleted], [e].[IsDeleted], [e].[Modified], [e].[SubjectId], [e].[UserId]
FROM [Enrollments] AS [e]
WHERE [e].[UserId] = @__user_Id_0 AND [e].[SubjectId] = @__request_SubjectId_1
2025-03-25 11:35:10.398 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Enrollments] ([Created], [DateDeleted], [Modified], [SubjectId], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-03-25 11:35:10.421 +01:00 [INF] User 1 successfully enrolled in Subject 2
2025-03-25 11:35:10.425 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 11:35:10.428 +01:00 [INF] Executed action BrainThrust.src.Controllers.EnrollmentController.EnrollUser (BrainThrust) in 135.5042ms
2025-03-25 11:35:10.433 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.EnrollmentController.EnrollUser (BrainThrust)'
2025-03-25 11:35:10.435 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/enrollments/enroll - 200 null application/json; charset=utf-8 190.1687ms
2025-03-25 11:54:33.360 +01:00 [INF] Application is shutting down...
2025-03-25 11:57:27.580 +01:00 [INF] âœ… Application started successfully.
2025-03-25 11:57:28.278 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 11:57:29.473 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 11:57:30.694 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 11:57:31.910 +01:00 [INF] Hosting environment: Development
2025-03-25 11:57:32.084 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 12:16:40.676 +01:00 [INF] Application is shutting down...
2025-03-25 12:17:27.218 +01:00 [INF] âœ… Application started successfully.
2025-03-25 12:17:27.328 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 12:17:27.461 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 12:17:27.467 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 12:17:27.469 +01:00 [INF] Hosting environment: Development
2025-03-25 12:17:27.472 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 12:41:19.428 +01:00 [INF] Application is shutting down...
2025-03-25 12:41:37.073 +01:00 [INF] âœ… Application started successfully.
2025-03-25 12:41:37.142 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 12:41:37.217 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 12:41:37.221 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 12:41:37.224 +01:00 [INF] Hosting environment: Development
2025-03-25 12:41:37.225 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 13:20:22.551 +01:00 [INF] Application is shutting down...
2025-03-25 13:21:05.954 +01:00 [INF] âœ… Application started successfully.
2025-03-25 13:21:06.790 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 13:21:06.974 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 13:21:07.661 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 13:21:07.857 +01:00 [INF] Hosting environment: Development
2025-03-25 13:21:07.861 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 13:21:09.840 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 13:21:09.997 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 159.0886ms
2025-03-25 13:21:10.164 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 13:21:10.306 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.669ms
2025-03-25 13:21:18.537 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 13:21:18.581 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 13:21:18.647 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 13:21:18.652 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:21:18.706 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 13:21:18.913 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 13:21:19.780 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 13:21:21.650 +01:00 [INF] Executed DbCommand (62ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 13:21:21.796 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 13:21:21.800 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 13:21:21.957 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 3242.9971ms
2025-03-25 13:21:21.961 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:21:22.087 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 3549.6547ms
2025-03-25 13:21:35.619 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:21:35.646 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-03-25 13:21:35.652 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-03-25 13:21:35.659 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 401 0 null 39.8774ms
2025-03-25 13:21:45.447 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:21:45.565 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:21:45.570 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:21:45.599 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 13:21:45.793 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:21:45.853 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:21:45.879 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ApplicationDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\HP\Desktop\BrainThrust\src\Data\ApplicationDbContext.cs:line 85
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 69
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:21:45.929 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:21:45.932 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 355.2238ms
2025-03-25 13:21:45.937 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:21:45.939 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 491.3637ms
2025-03-25 13:21:54.491 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:21:54.497 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:21:54.499 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:21:54.520 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:21:54.614 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:21:54.718 +01:00 [ERR] Failed executing DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:21:54.762 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
2025-03-25 13:21:54.797 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 75
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
2025-03-25 13:21:54.814 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:21:54.817 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 301.2613ms
2025-03-25 13:21:54.821 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:21:54.826 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 333.7002ms
2025-03-25 13:22:00.512 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:22:00.523 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:22:00.526 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:22:00.552 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:22:00.575 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:22:00.591 +01:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:22:00.599 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
2025-03-25 13:22:00.609 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 75
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
2025-03-25 13:22:00.622 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:22:00.624 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 86.2346ms
2025-03-25 13:22:00.625 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:22:00.627 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 114.2872ms
2025-03-25 13:22:05.345 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:22:05.352 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:22:05.386 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:22:05.390 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:22:05.414 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:22:05.423 +01:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:22:05.431 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
2025-03-25 13:22:05.444 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Score'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 75
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
ClientConnectionId:634c634a-7477-4f56-99a6-37401684d4c1
Error Number:207,State:1,Class:16
2025-03-25 13:22:05.456 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:22:05.457 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 68.2542ms
2025-03-25 13:22:05.461 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:22:05.465 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 119.7785ms
2025-03-25 13:23:34.781 +01:00 [INF] Application is shutting down...
2025-03-25 13:24:04.696 +01:00 [FTL] ðŸš¨ Application startup failed.
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at System.Diagnostics.DiagnosticSource.Write[T](String name, T value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 101
2025-03-25 13:24:28.960 +01:00 [FTL] ðŸš¨ Application startup failed.
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at System.Diagnostics.DiagnosticSource.Write[T](String name, T value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 101
2025-03-25 13:25:04.166 +01:00 [INF] âœ… Application started successfully.
2025-03-25 13:25:04.285 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 13:25:04.408 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 13:25:04.414 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 13:25:04.421 +01:00 [INF] Hosting environment: Development
2025-03-25 13:25:04.423 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 13:25:04.497 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 13:25:04.698 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 203.0894ms
2025-03-25 13:25:04.921 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 13:25:05.156 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 235.1238ms
2025-03-25 13:25:19.675 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 13:25:19.692 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 13:25:19.791 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 13:25:19.797 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:25:19.832 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 13:25:20.008 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 13:25:20.734 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 13:25:22.360 +01:00 [INF] Executed DbCommand (39ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 13:25:22.488 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 13:25:22.495 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 13:25:22.521 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2683.2363ms
2025-03-25 13:25:22.524 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:25:22.537 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2861.6698ms
2025-03-25 13:25:33.950 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:25:33.982 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-03-25 13:25:33.990 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-03-25 13:25:33.994 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 401 0 null 44.1238ms
2025-03-25 13:25:42.421 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:25:42.513 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:25:42.518 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:25:42.548 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 13:25:42.764 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:25:42.814 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:451ce8fc-569e-449b-a4fd-dd8007628326
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:451ce8fc-569e-449b-a4fd-dd8007628326
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:25:42.835 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:451ce8fc-569e-449b-a4fd-dd8007628326
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ApplicationDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\HP\Desktop\BrainThrust\src\Data\ApplicationDbContext.cs:line 85
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 69
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:25:42.851 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:25:42.853 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 327.1076ms
2025-03-25 13:25:42.855 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:25:42.857 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 435.379ms
2025-03-25 13:25:52.650 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:25:52.655 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:25:52.658 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:25:52.702 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:25:52.813 +01:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:25:52.940 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:25:53.102 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:25:53.128 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:25:53.130 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:25:53.136 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 440.6598ms
2025-03-25 13:25:53.138 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:25:53.140 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 490.1241ms
2025-03-25 13:26:10.839 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:26:10.845 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:26:10.847 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:26:10.897 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:26:10.920 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:26:10.932 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:26:10.942 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-03-25 13:26:10.949 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:26:10.951 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:26:10.952 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 63.8546ms
2025-03-25 13:26:10.954 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:26:10.955 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 115.7551ms
2025-03-25 13:26:28.651 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:26:28.655 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:26:28.656 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:26:28.697 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:26:28.727 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:26:28.732 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:26:28.736 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:26:28.745 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:26:28.747 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:26:28.750 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 52.8504ms
2025-03-25 13:26:28.751 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:26:28.753 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 101.8979ms
2025-03-25 13:26:56.349 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 13:26:56.353 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:26:56.354 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:26:56.371 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:26:56.389 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:26:56.402 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:26:56.420 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:26:56.427 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:26:56.432 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:26:56.435 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 64.4603ms
2025-03-25 13:26:56.436 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:26:56.438 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 88.2397ms
2025-03-25 13:27:34.226 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 13:27:34.230 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:27:34.231 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:27:34.263 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:27:34.287 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:27:34.293 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:27:34.297 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:27:34.306 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:27:34.307 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:27:34.309 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 47.0693ms
2025-03-25 13:27:34.311 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:27:34.313 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 86.735ms
2025-03-25 13:27:55.375 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 106
2025-03-25 13:27:55.379 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:27:55.385 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:27:55.392 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:27:55.429 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:27:55.436 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:27:55.440 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:27:55.446 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:27:55.448 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 58.1316ms
2025-03-25 13:27:55.450 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:27:55.452 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 76.9119ms
2025-03-25 13:28:19.441 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 13:28:19.444 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:28:19.445 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:28:19.476 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:28:19.509 +01:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:28:19.519 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:28:19.530 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:28:19.547 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:28:19.549 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:28:19.553 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 104.1871ms
2025-03-25 13:28:19.554 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:28:19.555 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 114.9658ms
2025-03-25 13:28:31.440 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 106
2025-03-25 13:28:31.444 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:28:31.445 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:28:31.456 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:28:31.481 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:28:31.488 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:28:31.491 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:28:31.492 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:28:31.494 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 38.8443ms
2025-03-25 13:28:31.499 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:28:31.501 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 61.9063ms
2025-03-25 13:28:49.936 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 13:28:49.940 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:28:49.941 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:28:49.981 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:28:50.004 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:28:50.014 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:28:50.020 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:28:50.030 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:28:50.031 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:28:50.033 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 52.0295ms
2025-03-25 13:28:50.034 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:28:50.035 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 99.5274ms
2025-03-25 13:29:18.555 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 13:29:18.559 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:29:18.560 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:29:18.608 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 13:29:18.620 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:29:18.626 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:451ce8fc-569e-449b-a4fd-dd8007628326
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:451ce8fc-569e-449b-a4fd-dd8007628326
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:29:18.654 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizAttempts_Quizzes_QuizId". The conflict occurred in database "BrainThrust-Database", table "dbo.Quizzes", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:451ce8fc-569e-449b-a4fd-dd8007628326
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ApplicationDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\HP\Desktop\BrainThrust\src\Data\ApplicationDbContext.cs:line 85
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 69
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:29:18.672 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:29:18.674 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 66.0551ms
2025-03-25 13:29:18.676 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:29:18.677 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 122.4588ms
2025-03-25 13:29:58.265 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 106
2025-03-25 13:29:58.269 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:29:58.271 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:29:58.314 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:29:58.342 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:29:58.348 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:29:58.355 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:29:58.356 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:29:58.358 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 45.1725ms
2025-03-25 13:29:58.360 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:29:58.362 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 97.014ms
2025-03-25 13:35:57.483 +01:00 [INF] Application is shutting down...
2025-03-25 13:36:31.653 +01:00 [INF] âœ… Application started successfully.
2025-03-25 13:36:31.736 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 13:36:31.960 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 13:36:32.061 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 13:36:32.064 +01:00 [INF] Hosting environment: Development
2025-03-25 13:36:32.081 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 13:36:32.131 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 13:36:32.273 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 145.6066ms
2025-03-25 13:36:32.575 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 13:36:32.738 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.763ms
2025-03-25 13:36:40.128 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 13:36:40.144 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 13:36:40.201 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 13:36:40.204 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:36:40.229 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 13:36:40.376 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 13:36:40.995 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 13:36:42.736 +01:00 [INF] Executed DbCommand (73ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 13:36:42.868 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 13:36:42.873 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 13:36:42.907 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2669.2754ms
2025-03-25 13:36:42.909 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:36:42.925 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2796.4732ms
2025-03-25 13:36:58.370 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:36:58.427 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:36:58.432 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:36:58.454 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 13:36:58.499 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:36:58.504 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: Invalid QuizId. The quiz does not exist.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 60
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:36:58.524 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:36:58.529 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 92.8327ms
2025-03-25 13:36:58.531 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:36:58.532 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 162.4422ms
2025-03-25 13:37:05.034 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:37:05.048 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:05.052 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:37:05.064 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:37:05.130 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:37:05.281 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:37:05.353 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:37:05.358 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: Invalid QuestionId: 0. The question does not exist.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 92
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:37:05.362 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:37:05.363 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 301.8345ms
2025-03-25 13:37:05.365 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:05.367 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 332.8845ms
2025-03-25 13:37:10.790 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:37:10.795 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:10.797 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:37:10.818 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:37:10.827 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:37:10.841 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:37:10.848 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:37:10.937 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:37:10.965 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:70304ac8-24b4-4bf0-913d-f9068d056d41
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:70304ac8-24b4-4bf0-913d-f9068d056d41
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:37:10.991 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:70304ac8-24b4-4bf0-913d-f9068d056d41
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ApplicationDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\HP\Desktop\BrainThrust\src\Data\ApplicationDbContext.cs:line 85
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 127
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:37:11.013 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:37:11.016 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 206.1131ms
2025-03-25 13:37:11.017 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:11.019 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 228.9995ms
2025-03-25 13:37:15.174 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:37:15.178 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:15.179 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:37:15.193 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:37:15.198 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:37:15.228 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:37:15.234 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:37:15.242 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:37:15.257 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:37:15.260 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:37:15.264 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 71.3492ms
2025-03-25 13:37:15.266 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:15.268 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 93.3917ms
2025-03-25 13:37:28.286 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:37:28.290 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:28.292 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:37:28.344 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:37:28.351 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:37:28.377 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:37:28.385 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:37:28.394 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-03-25 13:37:28.399 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:37:28.401 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:37:28.403 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 59.2472ms
2025-03-25 13:37:28.405 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:28.406 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 119.8804ms
2025-03-25 13:37:37.945 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:37:37.949 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:37.951 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:37:37.958 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:37:37.967 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:37:37.987 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:37:37.997 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:37:38.003 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:37:38.009 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:70304ac8-24b4-4bf0-913d-f9068d056d41
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:70304ac8-24b4-4bf0-913d-f9068d056d41
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:37:38.030 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:70304ac8-24b4-4bf0-913d-f9068d056d41
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ApplicationDbContext.SaveChangesAsync(CancellationToken cancellationToken) in C:\Users\HP\Desktop\BrainThrust\src\Data\ApplicationDbContext.cs:line 85
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 127
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:37:38.045 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:37:38.047 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 89.5259ms
2025-03-25 13:37:38.049 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:37:38.050 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 105.1599ms
2025-03-25 13:38:52.176 +01:00 [INF] Application is shutting down...
2025-03-25 13:39:39.508 +01:00 [INF] âœ… Application started successfully.
2025-03-25 13:39:39.835 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 13:39:40.077 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 13:39:40.089 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 13:39:40.094 +01:00 [INF] Hosting environment: Development
2025-03-25 13:39:40.097 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 13:39:42.905 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 13:39:43.135 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 232.9933ms
2025-03-25 13:39:43.492 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 13:39:43.709 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 216.8222ms
2025-03-25 13:39:52.294 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 13:39:52.323 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 13:39:52.421 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 13:39:52.428 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:39:52.507 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 13:39:52.871 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 13:39:54.244 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 13:39:56.640 +01:00 [INF] Executed DbCommand (79ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 13:39:56.923 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 13:39:56.943 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 13:39:57.000 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 4481.475ms
2025-03-25 13:39:57.004 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 13:39:57.028 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 4734.6504ms
2025-03-25 13:40:22.070 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:40:22.198 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:22.216 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:40:22.282 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 13:40:22.420 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:40:22.448 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: Validation Error: Quiz with ID 0 does not exist.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 143
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:40:22.498 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:40:22.502 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 277.6862ms
2025-03-25 13:40:22.506 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:22.514 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 444.1646ms
2025-03-25 13:40:29.352 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:40:29.383 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:29.394 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:40:29.438 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:40:29.608 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:40:30.458 +01:00 [INF] Executed DbCommand (528ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:40:30.557 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:40:30.561 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: Validation Error: Question with ID 0 does not exist.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 143
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:40:30.575 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:40:30.618 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 1210.7419ms
2025-03-25 13:40:30.624 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:30.626 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 1274.5175ms
2025-03-25 13:40:36.424 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:40:36.431 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:36.474 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:40:36.507 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:40:36.516 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:40:36.570 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:40:36.597 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:40:36.843 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:40:36.899 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5e81763d-ce9e-40a8-8dfb-cffe9d2d8b62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5e81763d-ce9e-40a8-8dfb-cffe9d2d8b62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:40:36.966 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: An unexpected error occurred while submitting the quiz.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 151
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:40:36.985 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:40:36.994 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 503.2982ms
2025-03-25 13:40:37.015 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:37.021 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 596.4788ms
2025-03-25 13:40:42.592 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:40:42.597 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:42.600 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:40:42.660 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:40:42.675 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:40:42.714 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:40:42.729 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:40:42.746 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:40:42.828 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:40:42.883 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:40:42.912 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 263.9444ms
2025-03-25 13:40:42.921 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:42.925 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 332.7925ms
2025-03-25 13:40:53.096 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:40:53.103 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:53.105 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:40:53.169 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:40:53.193 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:40:53.239 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:40:53.300 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:40:53.339 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-03-25 13:40:53.373 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:40:53.375 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:40:53.383 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 223.3411ms
2025-03-25 13:40:53.386 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:53.389 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 292.604ms
2025-03-25 13:40:58.261 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:40:58.266 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:58.269 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:40:58.334 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:40:58.340 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:40:58.355 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:40:58.373 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:40:58.388 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:40:58.403 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:40:58.406 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:40:58.414 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 80.4636ms
2025-03-25 13:40:58.417 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:40:58.419 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 158.6394ms
2025-03-25 13:41:04.409 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 13:41:04.416 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:41:04.470 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:41:04.494 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:41:04.514 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:41:04.544 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:41:04.553 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:41:04.568 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:41:04.582 +01:00 [ERR] An exception occurred in the database while saving changes for context type 'ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5e81763d-ce9e-40a8-8dfb-cffe9d2d8b62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_UserQuizSubmissions_Options_SelectedOptionId". The conflict occurred in database "BrainThrust-Database", table "dbo.Options", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:5e81763d-ce9e-40a8-8dfb-cffe9d2d8b62
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-25 13:41:04.656 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: An unexpected error occurred while submitting the quiz.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 151
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:41:04.672 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:41:04.683 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 194.6072ms
2025-03-25 13:41:04.686 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:41:04.688 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 279.4991ms
2025-03-25 13:41:11.073 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 13:41:11.079 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:41:11.087 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:41:11.115 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:41:11.142 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:41:11.193 +01:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:41:11.216 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:41:11.249 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 13:41:11.369 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 13:41:11.371 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 13:41:11.377 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 262.9289ms
2025-03-25 13:41:11.381 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:41:11.384 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 310.2111ms
2025-03-25 13:41:26.028 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 106
2025-03-25 13:41:26.034 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:41:26.036 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 13:41:26.059 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 13:41:26.075 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 13:41:26.116 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 13:41:26.139 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 13:41:26.148 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: Validation Error: Question with ID 10 does not exist.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 143
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 13:41:26.174 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 13:41:26.178 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 119.4216ms
2025-03-25 13:41:26.183 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 13:41:26.189 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 161.7612ms
2025-03-25 14:03:01.206 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 106
2025-03-25 14:03:01.325 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:03:01.340 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:03:01.354 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:03:02.441 +01:00 [INF] Executed DbCommand (34ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:03:02.505 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:03:02.527 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:03:02.535 +01:00 [ERR] SubmitQuiz: Error submitting quiz for User 1.
System.Exception: Validation Error: Question with ID 10 does not exist.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 143
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:03:02.542 +01:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-25 14:03:02.548 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 1194.281ms
2025-03-25 14:03:02.551 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:03:02.553 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 500 null text/plain; charset=utf-8 1346.9896ms
2025-03-25 14:11:30.283 +01:00 [INF] Application is shutting down...
2025-03-25 14:12:41.549 +01:00 [INF] âœ… Application started successfully.
2025-03-25 14:12:41.683 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 14:12:41.812 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 14:12:41.818 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 14:12:41.820 +01:00 [INF] Hosting environment: Development
2025-03-25 14:12:41.823 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 14:12:41.992 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 14:12:42.173 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 182.3379ms
2025-03-25 14:12:42.474 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 14:12:42.726 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 253.0307ms
2025-03-25 14:12:53.301 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 14:12:53.331 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 14:12:53.422 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 14:12:53.429 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 14:12:53.514 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 14:12:53.821 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 14:12:55.294 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 14:12:57.685 +01:00 [INF] Executed DbCommand (48ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 14:12:57.890 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 14:12:57.901 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 14:12:57.941 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 4418.6448ms
2025-03-25 14:12:57.947 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 14:12:57.968 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 4667.1288ms
2025-03-25 14:13:16.883 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:13:16.972 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:13:16.978 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:13:17.010 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 14:13:17.076 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:13:17.090 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Quiz with ID 0 does not exist. Please submit a valid quiz.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 65
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:13:17.127 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:13:17.134 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 151.8043ms
2025-03-25 14:13:17.143 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:13:17.147 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 263.0075ms
2025-03-25 14:13:38.118 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 105
2025-03-25 14:13:38.138 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:13:38.141 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:13:38.164 +01:00 [INF] User 1 submitted quiz for quiz ID 10
2025-03-25 14:13:38.261 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:13:38.268 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Quiz with ID 10 does not exist. Please submit a valid quiz.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 65
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:13:38.274 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:13:38.277 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 123.6035ms
2025-03-25 14:13:38.282 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:13:38.286 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 168.1168ms
2025-03-25 14:13:54.650 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:13:54.699 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:13:54.701 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:13:54.718 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:13:54.730 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:13:54.956 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:13:55.056 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:13:55.061 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Question with ID 0 does not exist. Please check your submission and try again.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 95
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:13:55.069 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:13:55.075 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 363.0204ms
2025-03-25 14:13:55.081 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:13:55.084 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 434.4113ms
2025-03-25 14:14:07.344 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:14:07.348 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:14:07.350 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:14:07.431 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:14:07.477 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:14:07.525 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:14:07.547 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:14:07.648 +01:00 [INF] Executed DbCommand (28ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:14:07.655 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 0 does not exist for Question ID 1. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 101
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:14:07.667 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:14:07.673 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 242.3811ms
2025-03-25 14:14:07.678 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:14:07.682 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 337.388ms
2025-03-25 14:14:13.088 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:14:13.095 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:14:13.111 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:14:13.128 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:14:13.139 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:14:13.169 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:14:13.177 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:14:13.188 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:14:13.327 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-03-25 14:14:13.389 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:14:13.391 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:14:13.406 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 279.0775ms
2025-03-25 14:14:13.412 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:14:13.415 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 326.7626ms
2025-03-25 14:15:31.361 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:15:31.368 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:15:31.385 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:15:31.405 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:15:31.422 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:15:31.466 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:15:31.510 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:15:31.530 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:15:31.551 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-03-25 14:15:31.581 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:15:31.583 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:15:31.585 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 181.135ms
2025-03-25 14:15:31.587 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:15:31.589 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 228.6783ms
2025-03-25 14:25:00.854 +01:00 [INF] Application is shutting down...
2025-03-25 14:25:58.696 +01:00 [INF] âœ… Application started successfully.
2025-03-25 14:25:58.786 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 14:25:58.870 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 14:25:58.874 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 14:25:58.876 +01:00 [INF] Hosting environment: Development
2025-03-25 14:25:58.877 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 14:26:20.718 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 14:26:20.850 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 132.6442ms
2025-03-25 14:26:21.008 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 14:26:21.148 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 141.2793ms
2025-03-25 14:26:30.085 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 14:26:30.110 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 14:26:30.264 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 14:26:30.267 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 14:26:30.296 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 14:26:30.457 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 14:26:31.086 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 14:26:32.713 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 14:26:32.834 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 14:26:32.841 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 14:26:32.871 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2568.7606ms
2025-03-25 14:26:32.873 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 14:26:32.884 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2799.098ms
2025-03-25 14:26:52.342 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:26:52.405 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:26:52.416 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:26:52.444 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 14:26:52.497 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:26:52.503 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Quiz with ID 0 does not exist. Please submit a valid quiz.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 65
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 109
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:26:52.519 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:26:52.521 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 100.981ms
2025-03-25 14:26:52.523 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:26:52.524 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 181.7282ms
2025-03-25 14:27:01.057 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:27:01.071 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:27:01.078 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:27:01.087 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:27:01.165 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:27:01.347 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:27:01.424 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:27:01.464 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:27:01.561 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-03-25 14:27:01.614 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:27:01.617 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:27:01.624 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 543.0714ms
2025-03-25 14:27:01.626 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:27:01.628 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 570.4442ms
2025-03-25 14:27:06.111 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:27:06.116 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:27:06.118 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:27:06.135 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:27:06.147 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Quizzes] AS [q]
        WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:27:06.179 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:27:06.194 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:27:06.201 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:27:06.213 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [IncorrectAnswers] = @p0, [Modified] = @p1
OUTPUT 1
WHERE [Id] = @p2;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-25 14:27:06.216 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:27:06.218 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:27:06.219 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 94.9912ms
2025-03-25 14:27:06.220 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:27:06.224 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 112.193ms
2025-03-25 14:38:36.958 +01:00 [INF] Application is shutting down...
2025-03-25 14:39:20.022 +01:00 [INF] âœ… Application started successfully.
2025-03-25 14:39:20.103 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 14:39:20.182 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 14:39:20.185 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 14:39:20.188 +01:00 [INF] Hosting environment: Development
2025-03-25 14:39:20.189 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 14:39:20.265 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 14:39:20.494 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 229.4025ms
2025-03-25 14:39:20.928 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 14:39:21.078 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.4233ms
2025-03-25 14:39:28.937 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 14:39:28.981 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 14:39:29.034 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 14:39:29.039 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 14:39:29.066 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 14:39:29.232 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 14:39:29.844 +01:00 [WRN] No store type was specified for the decimal property 'Score' on entity type 'UserQuizSubmission'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-03-25 14:39:31.568 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 14:39:31.689 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 14:39:31.695 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 14:39:31.723 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2650.7149ms
2025-03-25 14:39:31.726 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 14:39:31.736 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2798.2132ms
2025-03-25 14:39:44.866 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:39:44.934 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:39:44.940 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:39:44.971 +01:00 [INF] User 1 submitted quiz for quiz ID 0
2025-03-25 14:39:45.086 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:39:45.090 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Quiz with ID 0 does not exist. Please submit a valid quiz.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 70
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:39:45.110 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:39:45.113 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 169.2241ms
2025-03-25 14:39:45.119 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:39:45.121 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 255.2649ms
2025-03-25 14:39:55.376 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:39:55.420 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:39:55.422 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:39:55.431 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:39:55.496 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:39:55.695 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:39:55.754 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:39:55.760 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 0 does not exist for Question ID 1. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 114
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:39:55.765 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:39:55.769 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 343.7212ms
2025-03-25 14:39:55.772 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:39:55.773 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 397.8906ms
2025-03-25 14:40:01.576 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 104
2025-03-25 14:40:01.581 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:01.583 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:40:01.617 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:40:01.633 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:40:01.662 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:40:01.668 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:01.729 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [Modified] = @p1, [TotalScore] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [UserQuizSubmissions] ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-03-25 14:40:01.782 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:40:01.785 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:40:01.790 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 189.3647ms
2025-03-25 14:40:01.793 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:01.795 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 219.07ms
2025-03-25 14:40:31.000 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 167
2025-03-25 14:40:31.004 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:31.005 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:40:31.043 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:40:31.062 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:40:31.095 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:40:31.114 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:31.123 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:31.127 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 3 does not exist for Question ID 2. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 114
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:40:31.130 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:40:31.134 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 89.5238ms
2025-03-25 14:40:31.137 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:31.138 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 138.5754ms
2025-03-25 14:40:44.273 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 168
2025-03-25 14:40:44.278 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:44.280 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:40:44.292 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:40:44.298 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:40:44.339 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:40:44.349 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:44.368 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [q].[Id], [q].[CorrectOptionId], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[QuestionText], [q].[QuizId], [q].[Score]
FROM [Questions] AS [q]
WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__p_0
2025-03-25 14:40:44.371 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Question with ID 23 does not exist. Please check your submission and try again.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 108
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:40:44.375 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:40:44.377 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 86.1596ms
2025-03-25 14:40:44.382 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:44.384 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 110.7957ms
2025-03-25 14:40:54.119 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 167
2025-03-25 14:40:54.122 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:54.125 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:40:54.135 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:40:54.140 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:40:54.178 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:40:54.184 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:54.189 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:54.200 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 3 does not exist for Question ID 3. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 114
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:40:54.204 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:40:54.206 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 71.8882ms
2025-03-25 14:40:54.215 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:54.216 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 97.4814ms
2025-03-25 14:40:59.399 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 167
2025-03-25 14:40:59.402 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:59.403 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:40:59.436 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:40:59.449 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:40:59.485 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:40:59.496 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:59.502 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:40:59.505 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 3 does not exist for Question ID 4. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 114
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:40:59.516 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:40:59.518 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 110.9813ms
2025-03-25 14:40:59.520 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:40:59.522 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 122.8672ms
2025-03-25 14:41:05.378 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 167
2025-03-25 14:41:05.381 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:41:05.382 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:41:05.386 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:41:05.616 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:41:05.686 +01:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:41:05.700 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:41:05.709 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:41:05.715 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 3 does not exist for Question ID 5. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 114
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:41:05.723 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:41:05.725 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 339.4745ms
2025-03-25 14:41:05.730 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:41:05.731 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 353.4569ms
2025-03-25 14:41:15.540 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 167
2025-03-25 14:41:15.543 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:41:15.545 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:41:15.549 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:41:15.560 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:41:15.586 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:41:15.593 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:41:15.598 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:41:15.604 +01:00 [WRN] SubmitQuiz: Validation error for User 1.
System.ArgumentException: Selected option with ID 3 does not exist for Question ID 6. Please select a valid option.
   at BrainThrust.src.Repositories.QuizRepository.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Repositories\QuizRepository.cs:line 114
   at BrainThrust.src.Services.QuizService.SubmitQuiz(SubmitQuizDto submission, Int32 userId) in C:\Users\HP\Desktop\BrainThrust\src\Services\QuizService.cs:line 110
   at BrainThrust.src.Controllers.QuizController.SubmitQuiz(SubmitQuizDto submitQuizDto) in C:\Users\HP\Desktop\BrainThrust\src\Controllers\QuizController.cs:line 195
2025-03-25 14:41:15.608 +01:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType13`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-03-25 14:41:15.610 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 62.23ms
2025-03-25 14:41:15.612 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:41:15.614 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 400 null application/json; charset=utf-8 73.5957ms
2025-03-25 14:41:48.611 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 168
2025-03-25 14:41:48.615 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:41:48.616 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:41:48.633 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:41:48.657 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:41:48.687 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:41:48.698 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:41:48.703 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:41:48.757 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [Modified] = @p1, [TotalScore] = @p2
OUTPUT 1
WHERE [Id] = @p3;
MERGE [UserQuizSubmissions] USING (
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, 0),
(@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 1)) AS i ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
VALUES (i.[Created], i.[DateDeleted], i.[Modified], i.[QuestionId], i.[QuizId], i.[Score], i.[SelectedOptionId], i.[UserId], i.[UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted], i._Position;
2025-03-25 14:41:48.767 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:41:48.769 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:41:48.772 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 139.5454ms
2025-03-25 14:41:48.777 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:41:48.780 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 168.7943ms
2025-03-25 14:42:11.614 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 232
2025-03-25 14:42:11.617 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:42:11.619 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:42:11.653 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:42:11.670 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:42:11.696 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:42:11.705 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:11.710 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:11.718 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:11.760 +01:00 [INF] Executed DbCommand (32ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [Modified] = @p1, [TotalScore] = @p2
OUTPUT 1
WHERE [Id] = @p3;
MERGE [UserQuizSubmissions] USING (
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, 0),
(@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 1),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, 2)) AS i ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
VALUES (i.[Created], i.[DateDeleted], i.[Modified], i.[QuestionId], i.[QuizId], i.[Score], i.[SelectedOptionId], i.[UserId], i.[UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted], i._Position;
2025-03-25 14:42:11.789 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:42:11.790 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:42:11.792 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 169.5462ms
2025-03-25 14:42:11.794 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:42:11.795 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 181.857ms
2025-03-25 14:42:36.148 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 296
2025-03-25 14:42:36.152 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:42:36.153 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:42:36.159 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:42:36.192 +01:00 [INF] Executed DbCommand (24ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:42:36.223 +01:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:42:36.235 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:36.242 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:36.247 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:36.252 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:36.296 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = DateTime2), @p3='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = DateTime2), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = DateTime2), @p33='?' (DbType = DateTime2), @p34='?' (DbType = DateTime2), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [IsPassed] = @p1, [Modified] = @p2, [TotalScore] = @p3
OUTPUT 1
WHERE [Id] = @p4;
MERGE [UserQuizSubmissions] USING (
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, 0),
(@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, 1),
(@p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, 2),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, 3)) AS i ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
VALUES (i.[Created], i.[DateDeleted], i.[Modified], i.[QuestionId], i.[QuizId], i.[Score], i.[SelectedOptionId], i.[UserId], i.[UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted], i._Position;
2025-03-25 14:42:36.321 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:42:36.323 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:42:36.326 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 169.2033ms
2025-03-25 14:42:36.328 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:42:36.330 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 181.6387ms
2025-03-25 14:42:46.114 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - application/json 232
2025-03-25 14:42:46.117 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:42:46.145 +01:00 [INF] Route matched with {action = "SubmitQuiz", controller = "Quiz"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitQuiz(BrainThrust.src.Dtos.SubmissionDtos.SubmitQuizDto) on controller BrainThrust.src.Controllers.QuizController (BrainThrust).
2025-03-25 14:42:46.166 +01:00 [INF] User 1 submitted quiz for quiz ID 1
2025-03-25 14:42:46.171 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__submission_QuizId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [q1].[Id], [q1].[Created], [q1].[DateDeleted], [q1].[IsDeleted], [q1].[Modified], [q1].[Title], [q1].[TopicId], [q2].[Id], [q2].[CorrectOptionId], [q2].[Created], [q2].[DateDeleted], [q2].[IsDeleted], [q2].[Modified], [q2].[QuestionText], [q2].[QuizId], [q2].[Score]
FROM (
    SELECT TOP(1) [q].[Id], [q].[Created], [q].[DateDeleted], [q].[IsDeleted], [q].[Modified], [q].[Title], [q].[TopicId]
    FROM [Quizzes] AS [q]
    WHERE [q].[IsDeleted] = CAST(0 AS bit) AND [q].[Id] = @__submission_QuizId_0
) AS [q1]
LEFT JOIN (
    SELECT [q0].[Id], [q0].[CorrectOptionId], [q0].[Created], [q0].[DateDeleted], [q0].[IsDeleted], [q0].[Modified], [q0].[QuestionText], [q0].[QuizId], [q0].[Score]
    FROM [Questions] AS [q0]
    WHERE [q0].[IsDeleted] = CAST(0 AS bit)
) AS [q2] ON [q1].[Id] = [q2].[QuizId]
ORDER BY [q1].[Id]
2025-03-25 14:42:46.197 +01:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserQuizAttempts] ([CorrectAnswers], [Created], [DateDeleted], [IncorrectAnswers], [IsPassed], [Modified], [QuizId], [TotalQuestions], [TotalScore], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-03-25 14:42:46.205 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:46.212 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:46.218 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__sub_SelectedOptionId_0='?' (DbType = Int32), @__sub_QuestionId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Options] AS [o]
        WHERE [o].[IsDeleted] = CAST(0 AS bit) AND [o].[Id] = @__sub_SelectedOptionId_0 AND [o].[QuestionId] = @__sub_QuestionId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-03-25 14:42:46.257 +01:00 [INF] Executed DbCommand (26ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = DateTime2), @p2='?' (Precision = 5) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (DbType = DateTime2), @p6='?' (DbType = DateTime2), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = DateTime2), @p23='?' (DbType = DateTime2), @p24='?' (DbType = DateTime2), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserQuizAttempts] SET [CorrectAnswers] = @p0, [Modified] = @p1, [TotalScore] = @p2
OUTPUT 1
WHERE [Id] = @p3;
MERGE [UserQuizSubmissions] USING (
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, 0),
(@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, 1),
(@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, 2)) AS i ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Created], [DateDeleted], [Modified], [QuestionId], [QuizId], [Score], [SelectedOptionId], [UserId], [UserQuizAttemptId])
VALUES (i.[Created], i.[DateDeleted], i.[Modified], i.[QuestionId], i.[QuizId], i.[Score], i.[SelectedOptionId], i.[UserId], i.[UserQuizAttemptId])
OUTPUT INSERTED.[Id], INSERTED.[IsDeleted], i._Position;
2025-03-25 14:42:46.273 +01:00 [INF] SubmitQuiz: Quiz submitted successfully by User 1.
2025-03-25 14:42:46.274 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.QuizDtos.SubmitQuizResponseDto'.
2025-03-25 14:42:46.276 +01:00 [INF] Executed action BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust) in 111.3243ms
2025-03-25 14:42:46.278 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.QuizController.SubmitQuiz (BrainThrust)'
2025-03-25 14:42:46.280 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/quizzes/submit - 200 null application/json; charset=utf-8 166.7723ms
2025-03-25 15:16:37.125 +01:00 [INF] Application is shutting down...
2025-03-25 15:22:32.545 +01:00 [INF] âœ… Application started successfully.
2025-03-25 15:22:32.660 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 15:22:32.762 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 15:22:32.768 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 15:22:32.771 +01:00 [INF] Hosting environment: Development
2025-03-25 15:22:32.774 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 15:23:06.444 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 15:23:06.590 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 147.5639ms
2025-03-25 15:23:06.893 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 15:23:07.074 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 180.4423ms
2025-03-25 15:23:16.138 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 15:23:16.161 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 15:23:16.221 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 15:23:16.224 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:23:16.259 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 15:23:18.937 +01:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:23:18.979 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.ReportDtos.DashboardDto'.
2025-03-25 15:23:19.038 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 2773.266ms
2025-03-25 15:23:19.041 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:23:19.074 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 200 null application/json; charset=utf-8 2935.5591ms
2025-03-25 15:32:29.951 +01:00 [INF] Application is shutting down...
2025-03-25 15:40:24.411 +01:00 [INF] âœ… Application started successfully.
2025-03-25 15:40:25.704 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 15:40:27.208 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 15:40:28.612 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 15:40:29.031 +01:00 [INF] Hosting environment: Development
2025-03-25 15:40:29.538 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 15:40:39.758 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 15:40:39.897 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 140.3702ms
2025-03-25 15:40:39.992 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 15:40:40.185 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.245ms
2025-03-25 15:40:43.907 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 15:40:43.925 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 15:40:43.984 +01:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-03-25 15:40:43.989 +01:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-03-25 15:40:43.991 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 401 0 null 83.1501ms
2025-03-25 15:40:51.702 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 15:40:51.767 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 15:40:51.936 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 15:40:52.003 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 15:40:52.179 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 15:40:54.334 +01:00 [INF] Executed DbCommand (38ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 15:40:54.454 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 15:40:54.464 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 15:40:54.491 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2473.6072ms
2025-03-25 15:40:54.494 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 15:40:54.505 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2803.1673ms
2025-03-25 15:41:09.808 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 15:41:09.889 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:41:09.893 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 15:41:09.946 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:41:09.980 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:41:10.008 +01:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Created] >= DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-03-25 15:41:10.015 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:41:10.061 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [e].[SubjectId], COUNT(*)
FROM [Enrollments] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
GROUP BY [e].[SubjectId]
ORDER BY COUNT(*) DESC
2025-03-25 15:41:10.086 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], [u].[QuizId], CAST([u].[TotalScore] AS int), [u].[IsPassed], [u].[Created]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
ORDER BY [u].[Created] DESC
2025-03-25 15:41:10.109 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 213.7861ms
2025-03-25 15:41:10.111 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:41:10.113 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<UserQuizAttempt>()
    .Where(u => u.IsDeleted == False)
    .GroupBy(u => u.UserId)
    .Select(g => new ValueTuple<int, int>(
        g.Key, 
        (int)g
            .AsQueryable()
            .Sum(e => e.TotalScore)
    ))
    .OrderByDescending(e0 => e0.Item2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at BrainThrust.src.Repositories.DashboardRepository.GetTopScorers() in C:\Users\HP\Desktop\BrainThrust\src\Repositories\DashboardRepository.cs:line 54
   at BrainThrust.src.Services.DashboardService.GetDashboardData() in C:\Users\HP\Desktop\BrainThrust\src\Services\DashboardService.cs:line 27
   at BrainThrust_API.Controllers.DashboardController.GetDashboardData() in C:\Users\HP\Desktop\BrainThrust\src\Controllers\DashboardController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 123
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 15:41:10.159 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 500 null text/plain; charset=utf-8 350.3515ms
2025-03-25 15:43:37.583 +01:00 [INF] Application is shutting down...
2025-03-25 15:44:14.092 +01:00 [INF] âœ… Application started successfully.
2025-03-25 15:44:14.177 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 15:44:14.314 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 15:44:14.319 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 15:44:14.324 +01:00 [INF] Hosting environment: Development
2025-03-25 15:44:14.328 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 15:44:15.545 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 15:44:15.680 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 136.6345ms
2025-03-25 15:44:15.946 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 15:44:16.080 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 133.7638ms
2025-03-25 15:44:24.383 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 15:44:24.402 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 15:44:24.459 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 15:44:24.462 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 15:44:24.494 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 15:44:24.669 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 15:44:27.208 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 15:44:27.333 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 15:44:27.343 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 15:44:27.375 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2875.5773ms
2025-03-25 15:44:27.378 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 15:44:27.392 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 3008.7181ms
2025-03-25 15:44:41.652 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 15:44:41.724 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:44:41.729 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 15:44:41.793 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:44:41.810 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:44:41.828 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Created] >= DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-03-25 15:44:41.842 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:44:41.901 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [e].[SubjectId], COUNT(*)
FROM [Enrollments] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
GROUP BY [e].[SubjectId]
ORDER BY COUNT(*) DESC
2025-03-25 15:44:41.931 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], [u].[QuizId], CAST([u].[TotalScore] AS int), [u].[IsPassed], [u].[Created]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
ORDER BY [u].[Created] DESC
2025-03-25 15:44:41.957 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 221.8791ms
2025-03-25 15:44:41.958 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:44:41.960 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<UserQuizAttempt>()
    .Where(u => u.IsDeleted == False)
    .GroupBy(u => u.UserId)
    .Select(g => new ValueTuple<int, int>(
        g.Key, 
        (int)g
            .AsQueryable()
            .Sum(e => e.TotalScore)
    ))
    .OrderByDescending(e0 => e0.Item2)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at BrainThrust.src.Repositories.DashboardRepository.GetTopScorers() in C:\Users\HP\Desktop\BrainThrust\src\Repositories\DashboardRepository.cs:line 54
   at BrainThrust.src.Services.DashboardService.GetDashboardData() in C:\Users\HP\Desktop\BrainThrust\src\Services\DashboardService.cs:line 27
   at BrainThrust_API.Controllers.DashboardController.GetDashboardData() in C:\Users\HP\Desktop\BrainThrust\src\Controllers\DashboardController.cs:line 27
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Program.<>c.<<<Main>$>b__0_6>d.MoveNext() in C:\Users\HP\Desktop\BrainThrust\Program.cs:line 123
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-03-25 15:44:42.011 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 500 null text/plain; charset=utf-8 358.6744ms
2025-03-25 15:50:05.303 +01:00 [INF] Application is shutting down...
2025-03-25 15:50:39.172 +01:00 [INF] âœ… Application started successfully.
2025-03-25 15:50:39.421 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 15:50:39.522 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 15:50:39.529 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 15:50:39.531 +01:00 [INF] Hosting environment: Development
2025-03-25 15:50:39.533 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 15:51:04.122 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 15:51:04.267 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 146.5517ms
2025-03-25 15:51:04.488 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 15:51:04.624 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.1015ms
2025-03-25 15:51:18.920 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 15:51:18.934 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 15:51:18.988 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 15:51:18.991 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 15:51:19.026 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 15:51:19.210 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 15:51:21.593 +01:00 [INF] Executed DbCommand (33ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 15:51:21.721 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 15:51:21.732 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 15:51:21.758 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2724.8133ms
2025-03-25 15:51:21.761 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 15:51:21.773 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2853.1769ms
2025-03-25 15:51:35.708 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 15:51:35.802 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:51:35.809 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 15:51:35.872 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:51:35.887 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:51:35.905 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Created] >= DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-03-25 15:51:35.919 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:51:35.974 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [e].[SubjectId], COUNT(*)
FROM [Enrollments] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
GROUP BY [e].[SubjectId]
ORDER BY COUNT(*) DESC
2025-03-25 15:51:36.002 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], [u].[QuizId], CAST([u].[TotalScore] AS int), [u].[IsPassed], [u].[Created]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
ORDER BY [u].[Created] DESC
2025-03-25 15:51:36.021 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[TotalScore]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 15:51:36.047 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.ReportDtos.DashboardDto'.
2025-03-25 15:51:36.079 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 264.9121ms
2025-03-25 15:51:36.081 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 15:51:36.083 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 200 null application/json; charset=utf-8 374.5589ms
2025-03-25 16:20:41.270 +01:00 [INF] Application is shutting down...
2025-03-25 16:37:08.143 +01:00 [INF] âœ… Application started successfully.
2025-03-25 16:37:08.272 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 16:37:08.386 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 16:37:08.391 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 16:37:08.393 +01:00 [INF] Hosting environment: Development
2025-03-25 16:37:08.394 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 16:37:11.646 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 16:37:11.785 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 141.4183ms
2025-03-25 16:37:12.042 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 16:37:12.195 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 152.6495ms
2025-03-25 16:37:21.614 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 16:37:21.668 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 16:37:21.716 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 16:37:21.719 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 16:37:21.800 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 16:37:21.973 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 16:37:24.191 +01:00 [INF] Executed DbCommand (56ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 16:37:24.316 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 16:37:24.327 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 16:37:24.354 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2548.8025ms
2025-03-25 16:37:24.357 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 16:37:24.369 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2754.6763ms
2025-03-25 16:37:43.909 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 16:37:44.031 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 16:37:44.039 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 16:37:44.116 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:37:44.131 +01:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:37:44.147 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Created] >= DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-03-25 16:37:44.160 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:37:44.253 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [e].[SubjectId], COUNT(*) AS [Enrollments]
FROM [Enrollments] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
GROUP BY [e].[SubjectId]
ORDER BY COUNT(*) DESC
2025-03-25 16:37:44.295 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], [u].[QuizId], CAST([u].[TotalScore] AS int), [u].[IsPassed], [u].[Created]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
ORDER BY [u].[Created] DESC
2025-03-25 16:37:44.332 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], CAST(COALESCE(SUM([u].[TotalScore]), 0.0) AS int) AS [TotalScore]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
GROUP BY [u].[UserId]
ORDER BY CAST(COALESCE(SUM([u].[TotalScore]), 0.0) AS int) DESC
2025-03-25 16:37:44.347 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.ReportDtos.DashboardDto'.
2025-03-25 16:37:44.386 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 343.9194ms
2025-03-25 16:37:44.391 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 16:37:44.393 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 200 null application/json; charset=utf-8 483.7379ms
2025-03-25 16:40:36.106 +01:00 [INF] Application is shutting down...
2025-03-25 16:41:16.285 +01:00 [INF] âœ… Application started successfully.
2025-03-25 16:41:16.368 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 16:41:16.461 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 16:41:16.465 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 16:41:16.470 +01:00 [INF] Hosting environment: Development
2025-03-25 16:41:16.474 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 16:41:17.464 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 16:41:17.595 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 133.4923ms
2025-03-25 16:41:17.923 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 16:41:18.119 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 197.1114ms
2025-03-25 16:41:26.256 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 16:41:26.279 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 16:41:26.335 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 16:41:26.338 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 16:41:26.392 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 16:41:26.562 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 16:41:28.956 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 16:41:29.088 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 16:41:29.100 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 16:41:29.131 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 2731.0429ms
2025-03-25 16:41:29.135 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 16:41:29.153 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 2896.6005ms
2025-03-25 16:41:42.697 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 16:41:42.781 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 16:41:42.785 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 16:41:42.871 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:41:42.884 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:41:42.899 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Created] >= DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-03-25 16:41:42.909 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:41:42.965 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [e].[SubjectId], COUNT(*) AS [Enrollments]
FROM [Enrollments] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
GROUP BY [e].[SubjectId]
ORDER BY COUNT(*) DESC
2025-03-25 16:41:43.001 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], [u].[QuizId], CAST([u].[TotalScore] AS int), [u].[IsPassed], [u].[Created]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
ORDER BY [u].[Created] DESC
2025-03-25 16:41:43.037 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], CAST(COALESCE(SUM([u].[TotalScore]), 0.0) AS int) AS [TotalScore]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
GROUP BY [u].[UserId]
ORDER BY CAST(COALESCE(SUM([u].[TotalScore]), 0.0) AS int) DESC
2025-03-25 16:41:43.054 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.ReportDtos.DashboardDto'.
2025-03-25 16:41:43.099 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 310.7884ms
2025-03-25 16:41:43.101 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 16:41:43.103 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 200 null application/json; charset=utf-8 406.6425ms
2025-03-25 16:48:49.659 +01:00 [INF] Application is shutting down...
2025-03-25 16:49:44.680 +01:00 [INF] âœ… Application started successfully.
2025-03-25 16:49:44.819 +01:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-03-25 16:49:44.949 +01:00 [INF] Now listening on: http://localhost:5073
2025-03-25 16:49:44.955 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-25 16:49:44.958 +01:00 [INF] Hosting environment: Development
2025-03-25 16:49:44.960 +01:00 [INF] Content root path: C:\Users\HP\Desktop\BrainThrust
2025-03-25 16:50:04.317 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/index.html - null null
2025-03-25 16:50:04.632 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/index.html - 200 null text/html;charset=utf-8 318.1733ms
2025-03-25 16:50:04.840 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - null null
2025-03-25 16:50:05.144 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 306.6075ms
2025-03-25 16:50:12.191 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5073/api/users/login - application/json 131
2025-03-25 16:50:12.224 +01:00 [WRN] Failed to determine the https port for redirect.
2025-03-25 16:50:12.331 +01:00 [WRN] ðŸš¨ JWT Authentication Failed!
2025-03-25 16:50:12.338 +01:00 [INF] Executing endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 16:50:12.409 +01:00 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BrainThrust.src.Dtos.UserDtos.UserLoginDto) on controller BrainThrust.src.Controllers.UserController (BrainThrust).
2025-03-25 16:50:12.772 +01:00 [INF] Login attempt for email: oladimejiwilliams@outlook.com
2025-03-25 16:50:15.561 +01:00 [INF] Executed DbCommand (74ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[Created], [u].[DateDeleted], [u].[Email], [u].[FirstName], [u].[IsDeleted], [u].[LastName], [u].[Modified], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[PhoneNumber], [u].[Role], [u].[TokenExpiry]
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND LOWER([u].[Email]) = @__ToLower_0
2025-03-25 16:50:15.846 +01:00 [INF] User oladimejiwilliams@outlook.com successfully logged in.
2025-03-25 16:50:15.861 +01:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType19`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[BrainThrust.src.Dtos.UserDtos.GetUserDto, BrainThrust, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-25 16:50:15.956 +01:00 [INF] Executed action BrainThrust.src.Controllers.UserController.Login (BrainThrust) in 3531.7358ms
2025-03-25 16:50:15.961 +01:00 [INF] Executed endpoint 'BrainThrust.src.Controllers.UserController.Login (BrainThrust)'
2025-03-25 16:50:15.981 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5073/api/users/login - 200 null application/json; charset=utf-8 3789.8621ms
2025-03-25 16:50:31.659 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5073/api/dashboard - null null
2025-03-25 16:50:31.805 +01:00 [INF] Executing endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 16:50:31.824 +01:00 [INF] Route matched with {action = "GetDashboardData", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDashboardData() on controller BrainThrust_API.Controllers.DashboardController (BrainThrust).
2025-03-25 16:50:31.990 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:50:32.041 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:50:32.096 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Created] >= DATEADD(day, CAST(-30.0E0 AS int), GETUTCDATE())
2025-03-25 16:50:32.143 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Subjects] AS [s]
WHERE [s].[IsDeleted] = CAST(0 AS bit)
2025-03-25 16:50:32.305 +01:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [e].[SubjectId], COUNT(*) AS [Enrollments]
FROM [Enrollments] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit)
GROUP BY [e].[SubjectId]
ORDER BY COUNT(*) DESC
2025-03-25 16:50:32.378 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], [u].[QuizId], CAST([u].[TotalScore] AS int), [u].[IsPassed], [u].[Created]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
ORDER BY [u].[Created] DESC
2025-03-25 16:50:32.433 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [u].[UserId], CAST(COALESCE(SUM([u].[TotalScore]), 0.0) AS int) AS [TotalScore]
FROM [UserQuizAttempts] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
GROUP BY [u].[UserId]
ORDER BY CAST(COALESCE(SUM([u].[TotalScore]), 0.0) AS int) DESC
2025-03-25 16:50:32.459 +01:00 [INF] Executing OkObjectResult, writing value of type 'BrainThrust.src.Dtos.ReportDtos.DashboardDto'.
2025-03-25 16:50:32.550 +01:00 [INF] Executed action BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust) in 716.5755ms
2025-03-25 16:50:32.554 +01:00 [INF] Executed endpoint 'BrainThrust_API.Controllers.DashboardController.GetDashboardData (BrainThrust)'
2025-03-25 16:50:32.576 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5073/api/dashboard - 200 null application/json; charset=utf-8 916.6523ms
